[{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943538","pull_request_review_id":3513299327,"id":2566943538,"node_id":"PRRC_kwDOQdvB5c6ZAHMy","diff_hunk":"@@ -0,0 +1,256 @@\n+import SwiftUI\n+import Combine\n+import AppKit\n+\n+/// View for searching and browsing stored transcripts\n+struct TranscriptSearchView: View {\n+    @StateObject private var viewModel = TranscriptSearchViewModel()\n+    @State private var selectedTranscript: StoredTranscript?\n+    @State private var showingDetailView = false\n+    \n+    var body: some View {\n+        NavigationView {\n+            VStack(spacing: 0) {\n+                // Search bar\n+                HStack(spacing: 8) {\n+                    Image(systemName: \"magnifyingglass\")\n+                        .foregroundStyle(.gray)\n+                    TextField(\"Search transcripts...\", text: $viewModel.searchQuery)\n+                        .textFieldStyle(.roundedBorder)\n+                    if !viewModel.searchQuery.isEmpty {\n+                        Button(action: { viewModel.searchQuery = \"\" }) {\n+                            Image(systemName: \"xmark.circle.fill\")\n+                                .foregroundStyle(.gray)\n+                        }\n+                        .buttonStyle(.plain)\n+                    }\n+                }\n+                .padding(12)\n+                .background(Color(nsColor: .controlBackgroundColor))\n+                .border(Color(nsColor: .separatorColor), width: 1)\n+                \n+                if viewModel.isLoading {\n+                    VStack {\n+                        Spacer()\n+                        ProgressView()\n+                        Spacer()\n+                    }\n+                } else if viewModel.transcripts.isEmpty {\n+                    VStack(spacing: 12) {\n+                        Spacer()\n+                        Image(systemName: \"doc.text.image\")\n+                            .font(.system(size: 48))\n+                            .foregroundStyle(.gray)\n+                        Text(viewModel.searchQuery.isEmpty ? \"No transcripts yet\" : \"No results found\")\n+                            .font(.system(size: 14, weight: .semibold))\n+                        Text(viewModel.searchQuery.isEmpty ? \"Transcripts from meetings will appear here\" : \"Try different search terms\")\n+                            .font(.system(size: 12))\n+                            .foregroundStyle(.gray)\n+                        Spacer()\n+                    }\n+                    .frame(maxWidth: .infinity, maxHeight: .infinity)\n+                } else {\n+                    List(viewModel.transcripts) { transcript in\n+                        TranscriptRow(transcript: transcript)\n+                            .onTapGesture {\n+                                selectedTranscript = transcript\n+                                showingDetailView = true\n+                            }\n+                    }\n+                    .listStyle(.plain)\n+                }\n+            }\n+            .navigationTitle(\"Transcripts\")\n+            .toolbar {\n+                ToolbarItem(placement: .primaryAction) {\n+                    Button(action: { Task { await viewModel.refresh() } }) {\n+                        Image(systemName: \"arrow.clockwise\")\n+                    }\n+                }\n+            }\n+        }\n+        .navigationViewStyle(.automatic)\n+        .sheet(isPresented: $showingDetailView) {\n+            if let transcript = selectedTranscript {\n+                TranscriptDetailView(transcript: transcript)\n+            }\n+        }\n+        .onAppear {\n+            Task { await viewModel.loadTranscripts() }\n+        }\n+    }\n+}\n+\n+/// Row view for a single transcript\n+struct TranscriptRow: View {\n+    let transcript: StoredTranscript\n+    \n+    var body: some View {\n+        VStack(alignment: .leading, spacing: 4) {\n+            HStack {\n+                Text(transcript.title)\n+                    .font(.system(size: 13, weight: .semibold))\n+                    .lineLimit(1)\n+                Spacer()\n+                Text(transcript.formattedDate)\n+                    .font(.system(size: 11))\n+                    .foregroundStyle(.gray)\n+            }\n+            Text(transcript.transcript.prefix(100) + \"...\")\n+                .font(.system(size: 11))\n+                .lineLimit(2)\n+                .foregroundStyle(.gray)\n+        }\n+        .padding(.vertical, 8)\n+    }\n+}\n+\n+/// Detail view for a single transcript\n+struct TranscriptDetailView: View {\n+    let transcript: StoredTranscript\n+    @Environment(\\.dismiss) var dismiss\n+    \n+    var body: some View {\n+        VStack(spacing: 0) {\n+            // Header\n+            HStack {\n+                VStack(alignment: .leading, spacing: 4) {\n+                    Text(transcript.title)\n+                        .font(.system(size: 16, weight: .bold))\n+                    Text(transcript.formattedDate)\n+                        .font(.system(size: 12))\n+                        .foregroundStyle(.gray)\n+                }\n+                Spacer()\n+                Button(action: { dismiss() }) {\n+                    Image(systemName: \"xmark\")\n+                        .font(.system(size: 14, weight: .semibold))\n+                        .foregroundStyle(.gray)\n+                }\n+            }\n+            .padding(16)\n+            .background(Color(nsColor: .controlColor))\n+            .border(Color(nsColor: .separatorColor), width: 1)\n+            \n+            // Transcript content\n+            ScrollView {\n+                VStack(alignment: .leading, spacing: 12) {\n+                    Text(transcript.transcript)\n+                        .font(.system(size: 12, design: .monospaced))\n+                        .lineLimit(nil)\n+                        .frame(maxWidth: .infinity, alignment: .leading)\n+                }\n+                .padding(16)\n+            }\n+            \n+            // Footer with actions\n+            HStack(spacing: 12) {\n+                Button(action: copyTranscript) {\n+                    Label(\"Copy\", systemImage: \"doc.on.doc\")\n+                        .font(.system(size: 11, weight: .medium))\n+                }\n+                \n+                Button(action: exportTranscript) {\n+                    Label(\"Export\", systemImage: \"arrow.up.doc\")\n+                        .font(.system(size: 11, weight: .medium))\n+                }\n+                \n+                Spacer()\n+                \n+                Button(action: { dismiss() }) {\n+                    Text(\"Done\")\n+                        .font(.system(size: 11, weight: .medium))\n+                }\n+            }\n+            .padding(12)\n+            .background(Color(nsColor: .controlBackgroundColor))\n+            .border(Color(nsColor: .separatorColor), width: 1)\n+        }\n+    }\n+    \n+    private func copyTranscript() {\n+        NSPasteboard.general.clearContents()\n+        NSPasteboard.general.setString(transcript.transcript, forType: .string)\n+    }\n+    \n+    private func exportTranscript() {\n+        let savePanel = NSSavePanel()\n+        savePanel.allowedContentTypes = [.plainText]\n+        let fileName = transcript.title\n+            .replacingOccurrences(of: \"/\", with: \"-\")\n+            .replacingOccurrences(of: \":\", with: \"-\")\n+        savePanel.nameFieldStringValue = \"\\(fileName)-\\(Int(transcript.date.timeIntervalSince1970)).txt\"\n+        \n+        savePanel.begin { response in\n+            guard response == .OK, let url = savePanel.url else { return }\n+            do {\n+                try transcript.transcript.write(to: url, atomically: true, encoding: String.Encoding.utf8)\n+            } catch {\n+                print(\"Failed to export transcript: \\(error)\")\n+            }\n+        }\n+    }\n+}\n+\n+/// ViewModel for transcript search\n+@MainActor\n+final class TranscriptSearchViewModel: ObservableObject {\n+    @Published var searchQuery = \"\"\n+    @Published var transcripts: [StoredTranscript] = []\n+    @Published var isLoading = false\n+    \n+    private let store = TranscriptStore()\n+    private var searchTask: Task<Void, Never>?\n+    \n+    init() {\n+        $searchQuery\n+            .debounce(for: 0.3, scheduler: RunLoop.main)\n+            .sink { [weak self] _ in\n+                self?.performSearch()\n+            }\n+            .store(in: &cancellables)\n+    }\n+    \n+    private var cancellables = Set<AnyCancellable>()\n+    \n+    func loadTranscripts() async {\n+        isLoading = true\n+        do {\n+            let allTranscripts = try await store.allTranscripts()\n+            self.transcripts = allTranscripts\n+        } catch {\n+            print(\"Failed to load transcripts: \\(error)\")\n+        }\n+        isLoading = false\n+    }\n+    \n+    func refresh() async {\n+        await loadTranscripts()\n+    }\n+    \n+    private func performSearch() {\n+        searchTask?.cancel()\n+        searchTask = Task {\n+            isLoading = true\n+            \n+            do {\n+                if searchQuery.isEmpty {\n+                    let allTranscripts = try await store.allTranscripts()\n+                    self.transcripts = allTranscripts\n+                } else {\n+                    let results = try await store.search(query: searchQuery)\n+                    self.transcripts = results\n+                }\n+            } catch {\n+                print(\"Search failed: \\(error)\")\n+                self.transcripts = []","path":"OverhearApp/Sources/Features/Transcription/TranscriptSearchView.swift","commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"[nitpick] Failed transcript loads and searches are silently logged to console. Consider showing an error message in the UI when loading or searching fails.","created_at":"2025-11-27T01:55:49Z","updated_at":"2025-11-27T01:55:56Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943538","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943538"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943538"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":255,"original_start_line":222,"start_side":"RIGHT","line":286,"original_line":246,"side":"RIGHT","author_association":"NONE","original_position":246,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943543","pull_request_review_id":3513299327,"id":2566943543,"node_id":"PRRC_kwDOQdvB5c6ZAHM3","diff_hunk":"@@ -10,13 +10,20 @@ final class CalendarService: ObservableObject {\n     func requestAccessIfNeeded() async -> Bool {\n         let status = EKEventStore.authorizationStatus(for: .event)\n         authorizationStatus = status\n+        \n         switch status {\n         case .authorized:\n             return true\n         case .notDetermined:\n             let granted = await withCheckedContinuation { continuation in\n-                eventStore.requestAccess(to: .event) { granted, _ in\n-                    continuation.resume(returning: granted)\n+                if #available(macOS 14.0, *) {\n+                    eventStore.requestFullAccessToEvents { granted, _ in\n+                        continuation.resume(returning: granted)\n+                    }\n+                } else {\n+                    eventStore.requestAccess(to: .event) { granted, _ in\n+                        continuation.resume(returning: granted)\n+                    }","path":"OverhearApp/Sources/Features/Calendar/CalendarService.swift","commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"The availability check `#available(macOS 14.0, *)` branches to use `requestFullAccessToEvents`, but the app may have a deployment target lower than macOS 14.0. Ensure the deployment target in your Xcode project is set to macOS 14.0 or higher, otherwise users on older systems might experience issues. Alternatively, keep the fallback for backward compatibility.","created_at":"2025-11-27T01:55:49Z","updated_at":"2025-11-27T01:55:56Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943543","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943543"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943543"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":19,"start_side":"RIGHT","line":null,"original_line":26,"side":"RIGHT","author_association":"NONE","original_position":19,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943551","pull_request_review_id":3513299327,"id":2566943551,"node_id":"PRRC_kwDOQdvB5c6ZAHM_","diff_hunk":"@@ -8,105 +8,144 @@ struct MenuBarContentView: View {\n \n     var body: some View {\n         VStack(spacing: 0) {\n-            header\n-            Divider()\n+            // Meetings list\n             ScrollView {\n-                VStack(alignment: .leading, spacing: 12) {\n+                VStack(alignment: .leading, spacing: 0) {\n                     if viewModel.isLoading {\n-                        HStack { Spacer(); ProgressView(\"Loading events...\"); Spacer() }\n+                        HStack { Spacer(); ProgressView().scaleEffect(0.7); Spacer() }\n+                            .frame(height: 32)\n+                    } else if allMeetings.isEmpty {\n+                        Text(\"No meetings\")\n+                            .font(.system(size: 11))\n+                            .foregroundColor(.secondary)\n+                            .frame(maxWidth: .infinity, alignment: .center)\n+                            .frame(height: 32)\n                     } else {\n-                        if !viewModel.pastSections.isEmpty {\n-                            SectionHeader(title: \"Past\")\n-                            MeetingSectionList(sections: viewModel.pastSections,\n-                                               preferences: preferences,\n-                                               onJoin: viewModel.join)\n+                        ForEach(groupedMeetings, id: \\.date) { group in\n+                            // Date header\n+                            Text(formattedDate(group.date))\n+                                .font(.system(size: 10, weight: .semibold))\n+                                .foregroundColor(.secondary)\n+                                .padding(.top, 4)\n+                                .padding(.horizontal, 10)\n+                                .padding(.bottom, 1)\n+                            \n+                            // Meetings for this date\n+                            ForEach(group.meetings) { meeting in\n+                                MeetingRow(meeting: meeting, onJoin: viewModel.join)\n+                            }\n                         }\n-                        SectionHeader(title: \"Upcoming\")\n-                        MeetingSectionList(sections: viewModel.upcomingSections,\n-                                           preferences: preferences,\n-                                           onJoin: viewModel.join)\n                     }\n                 }\n-                .padding(.vertical, 12)\n+                .padding(.vertical, 4)\n             }\n+            \n             Divider()\n-            footer\n-        }\n-        .frame(width: 360, height: 520)\n-        .padding(.horizontal, 12)\n-    }\n-\n-    private var header: some View {\n-        HStack {\n-            VStack(alignment: .leading) {\n-                Text(\"Overhear\")\n-                    .font(.title2.bold())\n-                if let updated = viewModel.lastUpdated {\n-                    Text(\"Updated \\(relativeDate(updated))\")\n-                        .font(.caption)\n-                        .foregroundColor(.secondary)\n-                } else {\n-                    Text(\"Meeting launcher\")\n-                        .font(.caption)\n-                        .foregroundColor(.secondary)\n+            \n+            // Footer\n+            HStack(spacing: 10) {\n+                Button(action: openPreferences) {\n+                    Text(\"Preferences…\")\n+                        .font(.system(size: 11))\n                 }\n+                .keyboardShortcut(\"p\")\n+                \n+                Button(action: {}) {","path":"OverhearApp/Sources/Features/MenuBar/MenuBarContentView.swift","commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"The \"Send Feedback…\" button has an action that does nothing (`action: {}`). This is a non-functional button that will confuse users. Either implement the feedback functionality or remove the button until it's ready.\n```suggestion\n                Button(action: {\n                    let email = \"feedback@yourapp.com\"\n                    let subject = \"Overhear Feedback\"\n                    let body = \"\"\n                    let encodedSubject = subject.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed) ?? \"\"\n                    let encodedBody = body.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed) ?? \"\"\n                    if let url = URL(string: \"mailto:\\(email)?subject=\\(encodedSubject)&body=\\(encodedBody)\") {\n                        NSWorkspace.shared.open(url)\n                    }\n                }) {\n```","created_at":"2025-11-27T01:55:49Z","updated_at":"2025-11-27T01:55:56Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943551","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943551"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943551"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":53,"side":"RIGHT","author_association":"NONE","original_position":79,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943557","pull_request_review_id":3513299327,"id":2566943557,"node_id":"PRRC_kwDOQdvB5c6ZAHNF","diff_hunk":"@@ -19,7 +21,14 @@ final class PreferencesWindowController: NSWindowController {\n \n     func show() {\n         guard let window else { return }\n+        \n+        // Close popover first if it's open\n+        if let menuBarController = context?.menuBarController {\n+            menuBarController.closePopover()\n+        }\n+        \n         window.makeKeyAndOrderFront(nil)\n+        window.level = .floating","path":"OverhearApp/Sources/Features/Preferences/PreferencesWindowController.swift","commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"Setting `window.level = .floating` makes the preferences window float above all other windows, which is unusual for a preferences window. This prevents users from interacting with other apps while preferences are open. Consider using the default window level or `.normal` instead.\n```suggestion\n        window.level = .normal\n```","created_at":"2025-11-27T01:55:50Z","updated_at":"2025-11-27T01:55:56Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943557","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943557"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943557"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":31,"side":"RIGHT","author_association":"NONE","original_position":20,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943563","pull_request_review_id":3513299327,"id":2566943563,"node_id":"PRRC_kwDOQdvB5c6ZAHNL","diff_hunk":"@@ -2,20 +2,24 @@ import AppKit\n \n final class AppDelegate: NSObject, NSApplicationDelegate {\n     var context: AppContext?\n+    var menuBarController: MenuBarController?\n \n     func applicationDidFinishLaunching(_ notification: Notification) {\n-        NSApp.setActivationPolicy(.accessory)\n-        guard let context else { return }\n-\n-        let controller = MenuBarController(viewModel: context.meetingViewModel,\n-                                           preferencesWindowController: context.preferencesWindowController,\n-                                           preferences: context.preferencesService)\n+        NSApp.setActivationPolicy(.regular)","path":"OverhearApp/Sources/App/AppDelegate.swift","commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"Changing the activation policy from `.accessory` to `.regular` will show the app in the Dock and Command-Tab switcher, which may not be desirable for a menubar-only application. This change contradicts the description of creating a \"minimalist menubar\" experience. Consider reverting to `.accessory` unless showing in the Dock is intentional.\n```suggestion\n        NSApp.setActivationPolicy(.accessory)\n```","created_at":"2025-11-27T01:55:50Z","updated_at":"2025-11-27T01:55:56Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943563","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943563"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943563"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":8,"side":"RIGHT","author_association":"NONE","original_position":13,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943566","pull_request_review_id":3513299327,"id":2566943566,"node_id":"PRRC_kwDOQdvB5c6ZAHNO","diff_hunk":"@@ -0,0 +1,114 @@\n+import Foundation\n+\n+/// Manages transcription of audio files using whisper.cpp\n+actor TranscriptionService {\n+    enum Error: LocalizedError {\n+        case whisperBinaryNotFound\n+        case modelNotFound\n+        case transcriptionFailed(String)\n+        case invalidInputPath\n+        \n+        var errorDescription: String? {\n+            switch self {\n+            case .whisperBinaryNotFound:\n+                return \"Whisper.cpp binary not found. Please install whisper.cpp first.\"","path":"OverhearApp/Sources/Features/Audio/TranscriptionService.swift","commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"The error message \"Please install whisper.cpp first\" is not actionable. Consider providing more specific instructions such as: \"Whisper.cpp binary not found at {path}. Install whisper.cpp or set the WHISPER_BIN environment variable.\"","created_at":"2025-11-27T01:55:50Z","updated_at":"2025-11-27T01:55:56Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943566","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943566"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943566"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":14,"side":"RIGHT","author_association":"NONE","original_position":14,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943572","pull_request_review_id":3513299327,"id":2566943572,"node_id":"PRRC_kwDOQdvB5c6ZAHNU","diff_hunk":"@@ -0,0 +1,114 @@\n+import Foundation\n+\n+/// Manages transcription of audio files using whisper.cpp\n+actor TranscriptionService {\n+    enum Error: LocalizedError {\n+        case whisperBinaryNotFound\n+        case modelNotFound\n+        case transcriptionFailed(String)\n+        case invalidInputPath\n+        \n+        var errorDescription: String? {\n+            switch self {\n+            case .whisperBinaryNotFound:\n+                return \"Whisper.cpp binary not found. Please install whisper.cpp first.\"\n+            case .modelNotFound:\n+                return \"Whisper model not found. Please download ggml-base.en.bin.\"","path":"OverhearApp/Sources/Features/Audio/TranscriptionService.swift","commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"The error message should include the expected path where the model should be located. Consider: \"Whisper model not found at {modelPath}. Download ggml-base.en.bin from the whisper.cpp repository.\"","created_at":"2025-11-27T01:55:51Z","updated_at":"2025-11-27T01:55:56Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943572","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943572"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943572"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":16,"side":"RIGHT","author_association":"NONE","original_position":16,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943578","pull_request_review_id":3513299327,"id":2566943578,"node_id":"PRRC_kwDOQdvB5c6ZAHNa","diff_hunk":"@@ -0,0 +1,148 @@\n+import Foundation\n+\n+/// Represents a stored transcript with metadata\n+struct StoredTranscript: Codable, Identifiable {\n+    let id: String\n+    let meetingID: String\n+    let title: String\n+    let date: Date\n+    let transcript: String\n+    let duration: TimeInterval\n+    let audioFilePath: String?\n+    \n+    var formattedDate: String {\n+        let formatter = DateFormatter()\n+        formatter.dateStyle = .medium\n+        formatter.timeStyle = .short\n+        return formatter.string(from: date)\n+    }\n+}\n+\n+/// Manages storage and retrieval of transcripts\n+actor TranscriptStore {\n+    enum Error: LocalizedError {\n+        case storageDirectoryNotFound\n+        case encodingFailed(String)\n+        case decodingFailed(String)\n+        case notFound\n+        case deletionFailed(String)\n+        \n+        var errorDescription: String? {\n+            switch self {\n+            case .storageDirectoryNotFound:\n+                return \"Transcript storage directory not found\"\n+            case .encodingFailed(let message):\n+                return \"Failed to encode transcript: \\(message)\"\n+            case .decodingFailed(let message):\n+                return \"Failed to decode transcript: \\(message)\"\n+            case .notFound:\n+                return \"Transcript not found\"\n+            case .deletionFailed(let message):\n+                return \"Failed to delete transcript: \\(message)\"\n+            }\n+        }\n+    }\n+    \n+    private let storageDirectory: URL\n+    private let encoder = JSONEncoder()\n+    private let decoder = JSONDecoder()\n+    \n+    init(storageDirectory: URL? = nil) {\n+        if let provided = storageDirectory {\n+            self.storageDirectory = provided\n+        } else {\n+            let appSupport = FileManager.default.urls(for: .applicationSupportDirectory, in: .userDomainMask)[0]\n+            self.storageDirectory = appSupport.appendingPathComponent(\"com.overhear.app/Transcripts\")\n+        }\n+        \n+        try? FileManager.default.createDirectory(at: self.storageDirectory, withIntermediateDirectories: true)\n+    }\n+    \n+    /// Save a transcript\n+    func save(_ transcript: StoredTranscript) async throws {\n+        let fileURL = storageDirectory.appendingPathComponent(\"\\(transcript.id).json\")\n+        \n+        do {\n+            let data = try encoder.encode(transcript)\n+            try data.write(to: fileURL, options: .atomic)\n+        } catch {\n+            throw Error.encodingFailed(error.localizedDescription)\n+        }\n+    }\n+    \n+    /// Retrieve a transcript by ID\n+    func retrieve(id: String) async throws -> StoredTranscript {\n+        let fileURL = storageDirectory.appendingPathComponent(\"\\(id).json\")\n+        \n+        guard FileManager.default.fileExists(atPath: fileURL.path) else {\n+            throw Error.notFound\n+        }\n+        \n+        do {\n+            let data = try Data(contentsOf: fileURL)\n+            let transcript = try decoder.decode(StoredTranscript.self, from: data)\n+            return transcript\n+        } catch {\n+            throw Error.decodingFailed(error.localizedDescription)\n+        }\n+    }\n+    \n+    /// Get all stored transcripts\n+    func allTranscripts() async throws -> [StoredTranscript] {\n+        guard FileManager.default.fileExists(atPath: storageDirectory.path) else {\n+            return []\n+        }\n+        \n+        let fileURLs = try FileManager.default.contentsOfDirectory(\n+            at: storageDirectory,\n+            includingPropertiesForKeys: nil\n+        ).filter { $0.pathExtension == \"json\" }\n+        \n+        var transcripts: [StoredTranscript] = []\n+        \n+        for fileURL in fileURLs {\n+            do {\n+                let data = try Data(contentsOf: fileURL)\n+                let transcript = try decoder.decode(StoredTranscript.self, from: data)\n+                transcripts.append(transcript)\n+            } catch {\n+                // Skip files that can't be decoded\n+                continue\n+            }\n+        }\n+        \n+        return transcripts.sorted { $0.date > $1.date }\n+    }\n+    \n+    /// Search transcripts by text content\n+    func search(query: String) async throws -> [StoredTranscript] {\n+        let transcripts = try await allTranscripts()\n+        let lowerQuery = query.lowercased()\n+        \n+        return transcripts.filter { transcript in\n+            transcript.title.lowercased().contains(lowerQuery) ||\n+            transcript.transcript.lowercased().contains(lowerQuery)\n+        }","path":"OverhearApp/Sources/Features/Transcription/TranscriptStore.swift","commit_id":"9006bce58dddd7437a6c30b7bf87a64837fa3767","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"The search implementation loads all transcripts into memory and performs case-insensitive string matching on each one. For large transcript collections, this could be slow. Consider implementing pagination or limiting the number of results, or adding indexed search if transcript volumes grow large.\n```suggestion\n    /// Search transcripts by text content, with optional pagination\n    func search(query: String, limit: Int = 50, offset: Int = 0) async throws -> [StoredTranscript] {\n        let transcripts = try await allTranscripts()\n        let lowerQuery = query.lowercased()\n        \n        let filtered = transcripts.filter { transcript in\n            transcript.title.lowercased().contains(lowerQuery) ||\n            transcript.transcript.lowercased().contains(lowerQuery)\n        }\n        let start = min(offset, filtered.count)\n        let end = min(start + limit, filtered.count)\n        return Array(filtered[start..<end])\n```","created_at":"2025-11-27T01:55:51Z","updated_at":"2025-11-27T01:55:56Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943578","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943578"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943578"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":117,"start_side":"RIGHT","line":null,"original_line":125,"side":"RIGHT","author_association":"NONE","original_position":125,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943583","pull_request_review_id":3513299327,"id":2566943583,"node_id":"PRRC_kwDOQdvB5c6ZAHNf","diff_hunk":"@@ -0,0 +1,256 @@\n+import SwiftUI\n+import Combine\n+import AppKit\n+\n+/// View for searching and browsing stored transcripts\n+struct TranscriptSearchView: View {\n+    @StateObject private var viewModel = TranscriptSearchViewModel()\n+    @State private var selectedTranscript: StoredTranscript?\n+    @State private var showingDetailView = false\n+    \n+    var body: some View {\n+        NavigationView {\n+            VStack(spacing: 0) {\n+                // Search bar\n+                HStack(spacing: 8) {\n+                    Image(systemName: \"magnifyingglass\")\n+                        .foregroundStyle(.gray)\n+                    TextField(\"Search transcripts...\", text: $viewModel.searchQuery)\n+                        .textFieldStyle(.roundedBorder)\n+                    if !viewModel.searchQuery.isEmpty {\n+                        Button(action: { viewModel.searchQuery = \"\" }) {\n+                            Image(systemName: \"xmark.circle.fill\")\n+                                .foregroundStyle(.gray)\n+                        }\n+                        .buttonStyle(.plain)\n+                    }\n+                }\n+                .padding(12)\n+                .background(Color(nsColor: .controlBackgroundColor))\n+                .border(Color(nsColor: .separatorColor), width: 1)\n+                \n+                if viewModel.isLoading {\n+                    VStack {\n+                        Spacer()\n+                        ProgressView()\n+                        Spacer()\n+                    }\n+                } else if viewModel.transcripts.isEmpty {\n+                    VStack(spacing: 12) {\n+                        Spacer()\n+                        Image(systemName: \"doc.text.image\")\n+                            .font(.system(size: 48))\n+                            .foregroundStyle(.gray)\n+                        Text(viewModel.searchQuery.isEmpty ? \"No transcripts yet\" : \"No results found\")\n+                            .font(.system(size: 14, weight: .semibold))\n+                        Text(viewModel.searchQuery.isEmpty ? \"Transcripts from meetings will appear here\" : \"Try different search terms\")\n+                            .font(.system(size: 12))\n+                            .foregroundStyle(.gray)\n+                        Spacer()\n+                    }\n+                    .frame(maxWidth: .infinity, maxHeight: .infinity)\n+                } else {\n+                    List(viewModel.transcripts) { transcript in\n+                        TranscriptRow(transcript: transcript)\n+                            .onTapGesture {\n+                                selectedTranscript = transcript\n+                                showingDetailView = true\n+                            }\n+                    }\n+                    .listStyle(.plain)\n+                }\n+            }\n+            .navigationTitle(\"Transcripts\")\n+            .toolbar {\n+                ToolbarItem(placement: .primaryAction) {\n+                    Button(action: { Task { await viewModel.refresh() } }) {\n+                        Image(systemName: \"arrow.clockwise\")\n+                    }\n+                }\n+            }\n+        }\n+        .navigationViewStyle(.automatic)\n+        .sheet(isPresented: $showingDetailView) {\n+            if let transcript = selectedTranscript {\n+                TranscriptDetailView(transcript: transcript)\n+            }\n+        }\n+        .onAppear {\n+            Task { await viewModel.loadTranscripts() }\n+        }\n+    }\n+}\n+\n+/// Row view for a single transcript\n+struct TranscriptRow: View {\n+    let transcript: StoredTranscript\n+    \n+    var body: some View {\n+        VStack(alignment: .leading, spacing: 4) {\n+            HStack {\n+                Text(transcript.title)\n+                    .font(.system(size: 13, weight: .semibold))\n+                    .lineLimit(1)\n+                Spacer()\n+                Text(transcript.formattedDate)\n+                    .font(.system(size: 11))\n+                    .foregroundStyle(.gray)\n+            }\n+            Text(transcript.transcript.prefix(100) + \"...\")","path":"OverhearApp/Sources/Features/Transcription/TranscriptSearchView.swift","commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"This line will crash if the transcript is shorter than 100 characters. The `prefix(100)` returns a `String.SubSequence`, and appending \"...\" to it requires explicit conversion. Use `String(transcript.transcript.prefix(100))` or check if the transcript is longer than 100 characters before adding \"...\".\n```suggestion\n            Text(transcript.transcript.count > 100\n                 ? String(transcript.transcript.prefix(100)) + \"...\"\n                 : transcript.transcript)\n```","created_at":"2025-11-27T01:55:51Z","updated_at":"2025-11-27T01:55:56Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943583","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943583"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943583"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":99,"side":"RIGHT","author_association":"NONE","original_position":99,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943585","pull_request_review_id":3513299327,"id":2566943585,"node_id":"PRRC_kwDOQdvB5c6ZAHNh","diff_hunk":"@@ -55,7 +55,30 @@ final class MeetingListViewModel: ObservableObject {\n \n     func join(meeting: Meeting) {\n         guard let url = meeting.url else { return }\n-        NSWorkspace.shared.open(url)\n+        var urlToOpen = url\n+        if meeting.platform == .zoom, let zoommtgURL = convertToZoomMTG(url) {\n+            urlToOpen = zoommtgURL\n+        }\n+        let success = NSWorkspace.shared.open(urlToOpen)\n+        if !success {\n+            // Copy to clipboard as fallback\n+            NSPasteboard.general.clearContents()\n+            NSPasteboard.general.setString(url.absoluteString, forType: .string)\n+        }\n+    }\n+\n+    private func convertToZoomMTG(_ url: URL) -> URL? {\n+        guard let host = url.host?.lowercased(), host.contains(\"zoom.us\") || host.contains(\"zoom.com\") else {\n+            return nil\n+        }\n+        let path = url.path\n+        if path.hasPrefix(\"/j/\") || path.hasPrefix(\"/meeting/\") {\n+            let components = path.split(separator: \"/\")\n+            if components.count >= 3, let meetingID = components.last {\n+                return URL(string: \"zoommtg://zoom.us/join?confno=\\(meetingID)\")\n+            }\n+        }\n+        return nil\n     }\n ","path":"OverhearApp/Sources/Features/Meetings/MeetingListViewModel.swift","commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"The `join()` method now has custom Zoom URL conversion logic, but the PR also adds `MeetingPlatform.openURL()` and `PreferencesService.openBehavior()` for handling platform-specific URL opening. Consider using the centralized `meeting.platform.openURL()` method with the user's preferred open behavior instead of duplicating URL conversion logic here.\n```suggestion\n        meeting.platform.openURL(url: url, behavior: preferences.openBehavior)\n    }\n```","created_at":"2025-11-27T01:55:51Z","updated_at":"2025-11-27T01:55:57Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943585","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943585"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943585"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":58,"start_side":"RIGHT","line":null,"original_line":83,"side":"RIGHT","author_association":"NONE","original_position":30,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943591","pull_request_review_id":3513299327,"id":2566943591,"node_id":"PRRC_kwDOQdvB5c6ZAHNn","diff_hunk":"@@ -17,27 +17,53 @@ final class MenuBarController: NSObject {\n \n     func setup() {\n         let item = NSStatusBar.system.statusItem(withLength: NSStatusItem.variableLength)\n-        item.button?.image = NSImage(systemSymbolName: \"waveform\", accessibilityDescription: \"Overhear\")\n-        item.button?.target = self\n-        item.button?.action = #selector(togglePopover(_:))\n-        item.button?.appearsDisabled = false\n-        statusItem = item\n-\n-        popover.behavior = .transient\n+        \n+        guard let button = item.button else {\n+            return\n+        }\n+        \n+        button.title = \"📅\"\n+        button.target = self\n+        button.action = #selector(togglePopoverAction)\n+        \n+        // Setup popover\n+        popover.behavior = .semitransient","path":"OverhearApp/Sources/Features/MenuBar/MenuBarController.swift","commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"Changing popover behavior from `.transient` to `.semitransient` changes when the popover dismisses. `.semitransient` popovers remain open when clicking outside, unlike `.transient` which auto-dismiss. This may not provide the expected UX for a menubar app. Verify this change is intentional.\n```suggestion\n        popover.behavior = .transient\n```","created_at":"2025-11-27T01:55:52Z","updated_at":"2025-11-27T01:55:57Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943591","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943591"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943591"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":30,"side":"RIGHT","author_association":"NONE","original_position":30,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943598","pull_request_review_id":3513299327,"id":2566943598,"node_id":"PRRC_kwDOQdvB5c6ZAHNu","diff_hunk":"@@ -40,6 +39,22 @@ final class PreferencesService: ObservableObject {\n         didSet { persistSelectedCalendars() }\n     }\n \n+    @Published var zoomOpenBehavior: OpenBehavior {\n+        didSet { persist(zoomOpenBehavior, key: .zoomOpenBehavior) }\n+    }\n+\n+    @Published var meetOpenBehavior: OpenBehavior {\n+        didSet { persist(meetOpenBehavior, key: .meetOpenBehavior) }\n+    }\n+\n+    @Published var teamsOpenBehavior: OpenBehavior {\n+        didSet { persist(teamsOpenBehavior, key: .teamsOpenBehavior) }\n+    }\n+\n+    @Published var webexOpenBehavior: OpenBehavior {\n+        didSet { persist(webexOpenBehavior, key: .webexOpenBehavior) }","path":"OverhearApp/Sources/Features/Preferences/PreferencesService.swift","commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"The `persist()` method at line 134 uses `defaults.set(value, forKey:)` which will not properly serialize `OpenBehavior` enum values. You need to persist the `rawValue` property instead. Change the didSet to: `didSet { defaults.set(zoomOpenBehavior.rawValue, forKey: PreferenceKey.zoomOpenBehavior.rawValue) }` or update the `persist()` method to handle `RawRepresentable` types.\n```suggestion\n        didSet { persist(zoomOpenBehavior.rawValue, key: .zoomOpenBehavior) }\n    }\n\n    @Published var meetOpenBehavior: OpenBehavior {\n        didSet { persist(meetOpenBehavior.rawValue, key: .meetOpenBehavior) }\n    }\n\n    @Published var teamsOpenBehavior: OpenBehavior {\n        didSet { persist(teamsOpenBehavior.rawValue, key: .teamsOpenBehavior) }\n    }\n\n    @Published var webexOpenBehavior: OpenBehavior {\n        didSet { persist(webexOpenBehavior.rawValue, key: .webexOpenBehavior) }\n```","created_at":"2025-11-27T01:55:52Z","updated_at":"2025-11-27T01:55:57Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943598","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943598"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943598"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":43,"start_side":"RIGHT","line":null,"original_line":55,"side":"RIGHT","author_association":"NONE","original_position":25,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943606","pull_request_review_id":3513299327,"id":2566943606,"node_id":"PRRC_kwDOQdvB5c6ZAHN2","diff_hunk":"@@ -98,10 +103,65 @@ struct PreferencesView: View {\n         let accessGranted = await calendarService.requestAccessIfNeeded()\n         guard accessGranted else {\n             isLoadingCalendars = false\n-            calendars = []\n+            calendarsBySource = []\n             return\n         }\n-        calendars = calendarService.availableCalendars().sorted { $0.title < $1.title }\n+        \n+        calendarsBySource = calendarService.calendarsBySource()\n+        \n+        // Initialize with all calendars on first run\n+        let allCalendarIDs = calendarsBySource.flatMap { $0.calendars.map { $0.calendarIdentifier } }\n+        preferences.initializeWithAllCalendars(allCalendarIDs)\n+        \n         isLoadingCalendars = false\n     }\n }\n+\n+/// Toggle for an entire source\n+private struct SourceToggle: View {\n+    let source: EKSource\n+    let calendars: [EKCalendar]\n+    @ObservedObject var preferences: PreferencesService\n+    \n+    var body: some View {\n+        Toggle(isOn: Binding(\n+            get: {\n+                // All calendars in this source are selected\n+                calendars.allSatisfy { preferences.selectedCalendarIDs.contains($0.calendarIdentifier) }\n+            },\n+            set: { newValue in\n+                for calendar in calendars {\n+                    preferences.toggleCalendar(id: calendar.calendarIdentifier, enabled: newValue)\n+                }\n+            }\n+        )) {\n+            Text(source.title)\n+                .font(.system(size: 13, weight: .semibold))\n+        }\n+    }","path":"OverhearApp/Sources/Features/Preferences/PreferencesView.swift","commit_id":"1cf137d8bc9e4656a2be455f04962a52cdcd32ca","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"[nitpick] The source toggle doesn't visually indicate partial selection (when only some calendars in a source are selected). Consider using `@State private var mixedState: Bool` or a visual indicator to show the mixed state, as mentioned in the PR description about \"mixed selection support\".","created_at":"2025-11-27T01:55:52Z","updated_at":"2025-11-27T01:55:57Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943606","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943606"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943606"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":173,"original_start_line":127,"start_side":"RIGHT","line":197,"original_line":141,"side":"RIGHT","author_association":"NONE","original_position":114,"position":213,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943614","pull_request_review_id":3513299327,"id":2566943614,"node_id":"PRRC_kwDOQdvB5c6ZAHN-","diff_hunk":"@@ -55,7 +55,30 @@ final class MeetingListViewModel: ObservableObject {\n \n     func join(meeting: Meeting) {\n         guard let url = meeting.url else { return }\n-        NSWorkspace.shared.open(url)\n+        var urlToOpen = url\n+        if meeting.platform == .zoom, let zoommtgURL = convertToZoomMTG(url) {\n+            urlToOpen = zoommtgURL\n+        }\n+        let success = NSWorkspace.shared.open(urlToOpen)\n+        if !success {\n+            // Copy to clipboard as fallback\n+            NSPasteboard.general.clearContents()\n+            NSPasteboard.general.setString(url.absoluteString, forType: .string)\n+        }\n+    }\n+\n+    private func convertToZoomMTG(_ url: URL) -> URL? {\n+        guard let host = url.host?.lowercased(), host.contains(\"zoom.us\") || host.contains(\"zoom.com\") else {\n+            return nil\n+        }\n+        let path = url.path\n+        if path.hasPrefix(\"/j/\") || path.hasPrefix(\"/meeting/\") {\n+            let components = path.split(separator: \"/\")\n+            if components.count >= 3, let meetingID = components.last {\n+                return URL(string: \"zoommtg://zoom.us/join?confno=\\(meetingID)\")\n+            }\n+        }\n+        return nil\n     }","path":"OverhearApp/Sources/Features/Meetings/MeetingListViewModel.swift","commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"This function `convertToZoomMTG` is duplicated in both `MeetingListViewModel` and `Meeting.swift` (as a private method in `MeetingPlatform`). Consider removing this duplication and using the implementation from `MeetingPlatform.openURL()` instead, which already handles the conversion logic.","created_at":"2025-11-27T01:55:53Z","updated_at":"2025-11-27T01:55:57Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943614","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943614"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943614"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":70,"start_side":"RIGHT","line":null,"original_line":82,"side":"RIGHT","author_association":"NONE","original_position":29,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943621","pull_request_review_id":3513299327,"id":2566943621,"node_id":"PRRC_kwDOQdvB5c6ZAHOF","diff_hunk":"@@ -17,27 +17,53 @@ final class MenuBarController: NSObject {\n \n     func setup() {\n         let item = NSStatusBar.system.statusItem(withLength: NSStatusItem.variableLength)\n-        item.button?.image = NSImage(systemSymbolName: \"waveform\", accessibilityDescription: \"Overhear\")\n-        item.button?.target = self\n-        item.button?.action = #selector(togglePopover(_:))\n-        item.button?.appearsDisabled = false\n-        statusItem = item\n-\n-        popover.behavior = .transient\n+        \n+        guard let button = item.button else {\n+            return\n+        }\n+        \n+        button.title = \"📅\"\n+        button.target = self\n+        button.action = #selector(togglePopoverAction)\n+        \n+        // Setup popover\n+        popover.behavior = .semitransient\n         popover.contentSize = NSSize(width: 380, height: 520)\n         popover.contentViewController = NSHostingController(rootView: MenuBarContentView(viewModel: viewModel, preferences: preferences) {\n-            self.preferencesWindowController.show()\n+            self.showPreferences()\n         })\n+        \n+        // Store status item (must be retained)\n+        statusItem = item\n     }\n-\n+    \n     @objc\n-    private func togglePopover(_ sender: AnyObject?) {\n-        guard let button = statusItem?.button else { return }\n+    func togglePopoverAction() {","path":"OverhearApp/Sources/Features/MenuBar/MenuBarController.swift","commit_id":"499ffe45117158fd241f4d13be78e9110d071d81","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"[nitpick] The method name `togglePopoverAction` is redundant with the `@objc` selector naming convention. Consider renaming to just `togglePopover` to match the original name and typical Cocoa conventions.","created_at":"2025-11-27T01:55:53Z","updated_at":"2025-11-27T01:55:57Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943621","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943621"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943621"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":41,"side":"RIGHT","author_association":"NONE","original_position":45,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943630","pull_request_review_id":3513299327,"id":2566943630,"node_id":"PRRC_kwDOQdvB5c6ZAHOO","diff_hunk":"@@ -0,0 +1,111 @@\n+import Foundation\n+\n+/// Manages audio capture for meetings using the AudioSpike CLI tool\n+actor AudioCaptureService {\n+    enum Error: LocalizedError {\n+        case audioSpikeNotFound\n+        case captureFailed(String)\n+        case invalidOutputPath\n+        \n+        var errorDescription: String? {\n+            switch self {\n+            case .audioSpikeNotFound:\n+                return \"AudioSpike tool not found. Please build it first.\"","path":"OverhearApp/Sources/Features/Audio/AudioCaptureService.swift","commit_id":"499ffe45117158fd241f4d13be78e9110d071d81","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"The error message should include the expected path. Consider: \"AudioSpike tool not found at {audioSpikeExecutablePath}. Please build and install it to ~/.overhear/bin/AudioSpike.\"","created_at":"2025-11-27T01:55:53Z","updated_at":"2025-11-27T01:55:57Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943630","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943630"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943630"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":13,"side":"RIGHT","author_association":"NONE","original_position":13,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943635","pull_request_review_id":3513299327,"id":2566943635,"node_id":"PRRC_kwDOQdvB5c6ZAHOT","diff_hunk":"@@ -0,0 +1,109 @@\n+import Foundation\n+import Combine\n+\n+/// Manages recording and transcription for a specific meeting\n+@MainActor\n+final class MeetingRecordingManager: ObservableObject {\n+    enum Status {\n+        case idle\n+        case capturing\n+        case transcribing\n+        case completed\n+        case failed(Error)\n+    }\n+    \n+    enum RecordingError: LocalizedError {\n+        case notStarted\n+        case alreadyRecording\n+        case captureService(Error)\n+        case transcriptionService(Error)\n+        \n+        var errorDescription: String? {\n+            switch self {\n+            case .notStarted:\n+                return \"Recording not started\"\n+            case .alreadyRecording:\n+                return \"Recording already in progress\"\n+            case .captureService(let error):\n+                return error.localizedDescription\n+            case .transcriptionService(let error):\n+                return error.localizedDescription\n+            }\n+        }\n+    }\n+    \n+    let meetingID: String\n+    \n+    @Published private(set) var status: Status = .idle\n+    @Published private(set) var transcript: String = \"\"\n+    @Published private(set) var audioFileURL: URL?\n+    \n+    private let captureService: AudioCaptureService\n+    private let transcriptionService: TranscriptionService\n+    private let recordingDirectory: URL\n+    \n+    private var captureStartTime: Date?\n+    private var cancellables = Set<AnyCancellable>()\n+    \n+    init(\n+        meetingID: String,\n+        captureService: AudioCaptureService = AudioCaptureService(),\n+        transcriptionService: TranscriptionService = TranscriptionService()\n+    ) {\n+        self.meetingID = meetingID\n+        self.captureService = captureService\n+        self.transcriptionService = transcriptionService\n+        \n+        // Create recording directory in app support\n+        let appSupport = FileManager.default.urls(for: .applicationSupportDirectory, in: .userDomainMask)[0]\n+        self.recordingDirectory = appSupport.appendingPathComponent(\"com.overhear.app/Recordings\")\n+        \n+        try? FileManager.default.createDirectory(at: recordingDirectory, withIntermediateDirectories: true)\n+    }\n+    \n+    /// Start recording the meeting\n+    /// - Parameter duration: Maximum recording duration in seconds (default 3600 = 1 hour)\n+    func startRecording(duration: TimeInterval = 3600) async {\n+        guard case .idle = status else {\n+            status = .failed(RecordingError.alreadyRecording)\n+            return\n+        }\n+        \n+        status = .capturing\n+        captureStartTime = Date()\n+        \n+        let outputURL = recordingDirectory\n+            .appendingPathComponent(\"\\(meetingID)-\\(ISO8601DateFormatter().string(from: Date()))\")\n+            .appendingPathExtension(\"wav\")\n+        \n+        do {\n+            let audioURL = try await captureService.startCapture(duration: duration, outputURL: outputURL)\n+            self.audioFileURL = audioURL\n+            \n+            // Start transcription\n+            await startTranscription(audioURL: audioURL)\n+        } catch {\n+            status = .failed(RecordingError.captureService(error))\n+        }\n+    }\n+    \n+    /// Stop the current recording\n+    func stopRecording() {\n+        captureService.stopCapture()\n+        // Transcription will continue if in progress\n+    }","path":"OverhearApp/Sources/Features/Audio/MeetingRecordingManager.swift","commit_id":"1cf137d8bc9e4656a2be455f04962a52cdcd32ca","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"The `stopRecording()` method only stops capture but doesn't handle the case where transcription is already in progress. If transcription is ongoing when this is called, the status will remain `.transcribing` indefinitely. Consider setting the status or canceling the transcription task.","created_at":"2025-11-27T01:55:53Z","updated_at":"2025-11-27T01:55:57Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943635","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943635"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943635"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":98,"original_start_line":91,"start_side":"RIGHT","line":105,"original_line":94,"side":"RIGHT","author_association":"NONE","original_position":94,"position":105,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943641","pull_request_review_id":3513299327,"id":2566943641,"node_id":"PRRC_kwDOQdvB5c6ZAHOZ","diff_hunk":"@@ -0,0 +1,256 @@\n+import SwiftUI\n+import Combine\n+import AppKit\n+\n+/// View for searching and browsing stored transcripts\n+struct TranscriptSearchView: View {\n+    @StateObject private var viewModel = TranscriptSearchViewModel()\n+    @State private var selectedTranscript: StoredTranscript?\n+    @State private var showingDetailView = false\n+    \n+    var body: some View {\n+        NavigationView {\n+            VStack(spacing: 0) {\n+                // Search bar\n+                HStack(spacing: 8) {\n+                    Image(systemName: \"magnifyingglass\")\n+                        .foregroundStyle(.gray)\n+                    TextField(\"Search transcripts...\", text: $viewModel.searchQuery)\n+                        .textFieldStyle(.roundedBorder)\n+                    if !viewModel.searchQuery.isEmpty {\n+                        Button(action: { viewModel.searchQuery = \"\" }) {\n+                            Image(systemName: \"xmark.circle.fill\")\n+                                .foregroundStyle(.gray)\n+                        }\n+                        .buttonStyle(.plain)\n+                    }\n+                }\n+                .padding(12)\n+                .background(Color(nsColor: .controlBackgroundColor))\n+                .border(Color(nsColor: .separatorColor), width: 1)\n+                \n+                if viewModel.isLoading {\n+                    VStack {\n+                        Spacer()\n+                        ProgressView()\n+                        Spacer()\n+                    }\n+                } else if viewModel.transcripts.isEmpty {\n+                    VStack(spacing: 12) {\n+                        Spacer()\n+                        Image(systemName: \"doc.text.image\")\n+                            .font(.system(size: 48))\n+                            .foregroundStyle(.gray)\n+                        Text(viewModel.searchQuery.isEmpty ? \"No transcripts yet\" : \"No results found\")\n+                            .font(.system(size: 14, weight: .semibold))\n+                        Text(viewModel.searchQuery.isEmpty ? \"Transcripts from meetings will appear here\" : \"Try different search terms\")\n+                            .font(.system(size: 12))\n+                            .foregroundStyle(.gray)\n+                        Spacer()\n+                    }\n+                    .frame(maxWidth: .infinity, maxHeight: .infinity)\n+                } else {\n+                    List(viewModel.transcripts) { transcript in\n+                        TranscriptRow(transcript: transcript)\n+                            .onTapGesture {\n+                                selectedTranscript = transcript\n+                                showingDetailView = true\n+                            }\n+                    }\n+                    .listStyle(.plain)\n+                }\n+            }\n+            .navigationTitle(\"Transcripts\")\n+            .toolbar {\n+                ToolbarItem(placement: .primaryAction) {\n+                    Button(action: { Task { await viewModel.refresh() } }) {\n+                        Image(systemName: \"arrow.clockwise\")\n+                    }\n+                }\n+            }\n+        }\n+        .navigationViewStyle(.automatic)\n+        .sheet(isPresented: $showingDetailView) {\n+            if let transcript = selectedTranscript {\n+                TranscriptDetailView(transcript: transcript)\n+            }\n+        }\n+        .onAppear {\n+            Task { await viewModel.loadTranscripts() }\n+        }\n+    }\n+}\n+\n+/// Row view for a single transcript\n+struct TranscriptRow: View {\n+    let transcript: StoredTranscript\n+    \n+    var body: some View {\n+        VStack(alignment: .leading, spacing: 4) {\n+            HStack {\n+                Text(transcript.title)\n+                    .font(.system(size: 13, weight: .semibold))\n+                    .lineLimit(1)\n+                Spacer()\n+                Text(transcript.formattedDate)\n+                    .font(.system(size: 11))\n+                    .foregroundStyle(.gray)\n+            }\n+            Text(transcript.transcript.prefix(100) + \"...\")\n+                .font(.system(size: 11))\n+                .lineLimit(2)\n+                .foregroundStyle(.gray)\n+        }\n+        .padding(.vertical, 8)\n+    }\n+}\n+\n+/// Detail view for a single transcript\n+struct TranscriptDetailView: View {\n+    let transcript: StoredTranscript\n+    @Environment(\\.dismiss) var dismiss\n+    \n+    var body: some View {\n+        VStack(spacing: 0) {\n+            // Header\n+            HStack {\n+                VStack(alignment: .leading, spacing: 4) {\n+                    Text(transcript.title)\n+                        .font(.system(size: 16, weight: .bold))\n+                    Text(transcript.formattedDate)\n+                        .font(.system(size: 12))\n+                        .foregroundStyle(.gray)\n+                }\n+                Spacer()\n+                Button(action: { dismiss() }) {\n+                    Image(systemName: \"xmark\")\n+                        .font(.system(size: 14, weight: .semibold))\n+                        .foregroundStyle(.gray)\n+                }\n+            }\n+            .padding(16)\n+            .background(Color(nsColor: .controlColor))\n+            .border(Color(nsColor: .separatorColor), width: 1)\n+            \n+            // Transcript content\n+            ScrollView {\n+                VStack(alignment: .leading, spacing: 12) {\n+                    Text(transcript.transcript)\n+                        .font(.system(size: 12, design: .monospaced))\n+                        .lineLimit(nil)\n+                        .frame(maxWidth: .infinity, alignment: .leading)\n+                }\n+                .padding(16)\n+            }\n+            \n+            // Footer with actions\n+            HStack(spacing: 12) {\n+                Button(action: copyTranscript) {\n+                    Label(\"Copy\", systemImage: \"doc.on.doc\")\n+                        .font(.system(size: 11, weight: .medium))\n+                }\n+                \n+                Button(action: exportTranscript) {\n+                    Label(\"Export\", systemImage: \"arrow.up.doc\")\n+                        .font(.system(size: 11, weight: .medium))\n+                }\n+                \n+                Spacer()\n+                \n+                Button(action: { dismiss() }) {\n+                    Text(\"Done\")\n+                        .font(.system(size: 11, weight: .medium))\n+                }\n+            }\n+            .padding(12)\n+            .background(Color(nsColor: .controlBackgroundColor))\n+            .border(Color(nsColor: .separatorColor), width: 1)\n+        }\n+    }\n+    \n+    private func copyTranscript() {\n+        NSPasteboard.general.clearContents()\n+        NSPasteboard.general.setString(transcript.transcript, forType: .string)\n+    }\n+    \n+    private func exportTranscript() {\n+        let savePanel = NSSavePanel()\n+        savePanel.allowedContentTypes = [.plainText]\n+        let fileName = transcript.title\n+            .replacingOccurrences(of: \"/\", with: \"-\")\n+            .replacingOccurrences(of: \":\", with: \"-\")\n+        savePanel.nameFieldStringValue = \"\\(fileName)-\\(Int(transcript.date.timeIntervalSince1970)).txt\"\n+        \n+        savePanel.begin { response in\n+            guard response == .OK, let url = savePanel.url else { return }\n+            do {\n+                try transcript.transcript.write(to: url, atomically: true, encoding: String.Encoding.utf8)\n+            } catch {\n+                print(\"Failed to export transcript: \\(error)\")","path":"OverhearApp/Sources/Features/Transcription/TranscriptSearchView.swift","commit_id":"1cf137d8bc9e4656a2be455f04962a52cdcd32ca","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"[nitpick] Export errors are silently logged to console. Consider showing an alert to the user when export fails.","created_at":"2025-11-27T01:55:54Z","updated_at":"2025-11-27T01:55:57Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943641","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943641"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943641"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":217,"original_line":189,"side":"RIGHT","author_association":"NONE","original_position":189,"position":217,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943650","pull_request_review_id":3513299327,"id":2566943650,"node_id":"PRRC_kwDOQdvB5c6ZAHOi","diff_hunk":"@@ -8,105 +8,144 @@ struct MenuBarContentView: View {\n \n     var body: some View {\n         VStack(spacing: 0) {\n-            header\n-            Divider()\n+            // Meetings list\n             ScrollView {\n-                VStack(alignment: .leading, spacing: 12) {\n+                VStack(alignment: .leading, spacing: 0) {\n                     if viewModel.isLoading {\n-                        HStack { Spacer(); ProgressView(\"Loading events...\"); Spacer() }\n+                        HStack { Spacer(); ProgressView().scaleEffect(0.7); Spacer() }\n+                            .frame(height: 32)\n+                    } else if allMeetings.isEmpty {\n+                        Text(\"No meetings\")\n+                            .font(.system(size: 11))\n+                            .foregroundColor(.secondary)\n+                            .frame(maxWidth: .infinity, alignment: .center)\n+                            .frame(height: 32)\n                     } else {\n-                        if !viewModel.pastSections.isEmpty {\n-                            SectionHeader(title: \"Past\")\n-                            MeetingSectionList(sections: viewModel.pastSections,\n-                                               preferences: preferences,\n-                                               onJoin: viewModel.join)\n+                        ForEach(groupedMeetings, id: \\.date) { group in\n+                            // Date header\n+                            Text(formattedDate(group.date))\n+                                .font(.system(size: 10, weight: .semibold))\n+                                .foregroundColor(.secondary)\n+                                .padding(.top, 4)\n+                                .padding(.horizontal, 10)\n+                                .padding(.bottom, 1)\n+                            \n+                            // Meetings for this date\n+                            ForEach(group.meetings) { meeting in\n+                                MeetingRow(meeting: meeting, onJoin: viewModel.join)\n+                            }\n                         }\n-                        SectionHeader(title: \"Upcoming\")\n-                        MeetingSectionList(sections: viewModel.upcomingSections,\n-                                           preferences: preferences,\n-                                           onJoin: viewModel.join)\n                     }\n                 }\n-                .padding(.vertical, 12)\n+                .padding(.vertical, 4)\n             }\n+            \n             Divider()\n-            footer\n-        }\n-        .frame(width: 360, height: 520)\n-        .padding(.horizontal, 12)\n-    }\n-\n-    private var header: some View {\n-        HStack {\n-            VStack(alignment: .leading) {\n-                Text(\"Overhear\")\n-                    .font(.title2.bold())\n-                if let updated = viewModel.lastUpdated {\n-                    Text(\"Updated \\(relativeDate(updated))\")\n-                        .font(.caption)\n-                        .foregroundColor(.secondary)\n-                } else {\n-                    Text(\"Meeting launcher\")\n-                        .font(.caption)\n-                        .foregroundColor(.secondary)\n+            \n+            // Footer\n+            HStack(spacing: 10) {\n+                Button(action: openPreferences) {\n+                    Text(\"Preferences…\")\n+                        .font(.system(size: 11))\n                 }\n+                .keyboardShortcut(\"p\")\n+                \n+                Button(action: {}) {\n+                    Text(\"Send Feedback…\")\n+                        .font(.system(size: 11))\n+                }\n+                .keyboardShortcut(\"f\")\n+                \n+                Spacer()\n+                \n+                Button(action: { NSApp.terminate(nil) }) {\n+                    Text(\"Quit\")\n+                        .font(.system(size: 11))\n+                }\n+                .keyboardShortcut(\"q\")\n             }\n-            Spacer()\n-            Button(action: { Task { await viewModel.reload() } }) {\n-                Image(systemName: \"arrow.clockwise\")\n-            }\n-            .buttonStyle(.borderless)\n+            .padding(.horizontal, 10)\n+            .padding(.vertical, 6)\n         }\n-        .padding(.vertical, 12)\n+        .frame(width: 320, height: 380)\n     }\n-\n-    private var footer: some View {\n-        HStack {\n-            Button(\"Preferences…\") { openPreferences() }\n-            Spacer()\n-            Button(\"Quit\") { NSApp.terminate(nil) }\n-                .keyboardShortcut(\"q\")\n+    \n+    private var allMeetings: [Meeting] {\n+        (viewModel.pastSections + viewModel.upcomingSections)\n+            .flatMap { $0.meetings }\n+    }\n+    \n+    private var groupedMeetings: [(date: Date, meetings: [Meeting])] {\n+        let grouped = Dictionary(grouping: allMeetings) { meeting -> Date in\n+            Calendar.current.startOfDay(for: meeting.startDate)\n         }\n-        .padding(.vertical, 10)\n+        \n+        return grouped.sorted { $0.key < $1.key }\n+            .map { ($0.key, $0.value.sorted { $0.startDate < $1.startDate }) }\n     }\n-\n-    private func relativeDate(_ date: Date) -> String {\n-        let formatter = RelativeDateTimeFormatter()\n-        formatter.unitsStyle = .short\n-        return formatter.localizedString(for: date, relativeTo: Date())\n+    \n+    private func formattedDate(_ date: Date) -> String {\n+        let formatter = DateFormatter()\n+        formatter.dateFormat = \"EEEE, d MMMM\"\n+        return formatter.string(from: date)\n     }\n }\n \n-private struct MeetingSectionList: View {\n-    let sections: [MeetingSection]\n-    @ObservedObject var preferences: PreferencesService\n+private struct MeetingRow: View {\n+    let meeting: Meeting\n     var onJoin: (Meeting) -> Void\n-\n+    \n     var body: some View {\n-        ForEach(sections) { section in\n-            VStack(alignment: .leading, spacing: 8) {\n-                Text(section.title)\n-                    .font(.headline)\n-                ForEach(section.meetings) { meeting in\n-                    MeetingRowView(meeting: meeting,\n-                                   use24HourClock: preferences.use24HourClock,\n-                                   onJoin: onJoin)\n+        HStack(spacing: 8) {\n+            // Icon - smaller\n+            Image(systemName: meetingIcon)\n+                .font(.system(size: 11, weight: .semibold))\n+                .foregroundColor(.blue)\n+                .frame(width: 12)\n+            \n+            // Title and time\n+            VStack(alignment: .leading, spacing: 0) {\n+                Text(meeting.title)\n+                    .font(.system(size: 12, weight: .medium))\n+                    .lineLimit(1)\n+                \n+                if !meeting.isAllDay {\n+                    Text(timeString)\n+                        .font(.system(size: 10))\n+                        .foregroundColor(.secondary)\n                 }\n             }\n-            .padding(.bottom, 8)\n+            \n+            Spacer()\n+            \n+            // Join button if has URL\n+            if meeting.url != nil {\n+                Button(action: { onJoin(meeting) }) {\n+                    Image(systemName: \"link\")\n+                        .font(.system(size: 10))\n+                        .frame(width: 20, height: 20)\n+                }\n+                .buttonStyle(.borderless)\n+                .help(\"Join meeting\")\n+            }\n         }\n+        .padding(.vertical, 2)\n+        .padding(.horizontal, 10)\n     }\n-}\n-\n-private struct SectionHeader: View {\n-    let title: String\n-    var body: some View {\n-        HStack {\n-            Text(title)\n-                .font(.subheadline)\n-                .textCase(.uppercase)\n-                .foregroundColor(.secondary)\n-            Spacer()\n+    \n+    private var meetingIcon: String {\n+        if meeting.url != nil {\n+            return \"video.fill\"\n+        } else if meeting.isAllDay {\n+            return \"calendar\"\n+        } else {\n+            return \"clock\"\n         }\n     }\n+    \n+    private var timeString: String {\n+        let formatter = DateFormatter()\n+        formatter.dateFormat = \"h:mm a\"","path":"OverhearApp/Sources/Features/MenuBar/MenuBarContentView.swift","commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"[nitpick] The time format is hardcoded to \"h:mm a\" (12-hour format). Consider using `preferences.use24HourClock` to respect the user's time format preference, similar to how it was used in the previous implementation.","created_at":"2025-11-27T01:55:54Z","updated_at":"2025-11-27T01:55:57Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943650","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943650"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943650"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":148,"side":"RIGHT","author_association":"NONE","original_position":217,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943657","pull_request_review_id":3513299327,"id":2566943657,"node_id":"PRRC_kwDOQdvB5c6ZAHOp","diff_hunk":"@@ -0,0 +1,115 @@\n+import SwiftUI\n+import AppKit\n+\n+/// View for displaying live transcription during a meeting\n+struct TranscriptionView: View {\n+    @ObservedObject var recordingManager: MeetingRecordingManager\n+    \n+    var body: some View {\n+        VStack(alignment: .leading, spacing: 12) {\n+            HStack {\n+                Image(systemName: \"text.bubble.fill\")\n+                    .foregroundStyle(.blue)\n+                Text(\"Transcript\")\n+                    .font(.system(size: 14, weight: .semibold))\n+                Spacer()\n+                statusIndicator\n+            }\n+            .padding(.bottom, 4)\n+            \n+            // Transcript text area\n+            ScrollView {\n+                Text(recordingManager.transcript.isEmpty ? \"Waiting for audio...\" : recordingManager.transcript)\n+                    .font(.system(size: 12, design: .monospaced))\n+                    .lineLimit(nil)\n+                    .frame(maxWidth: .infinity, alignment: .leading)\n+                    .padding(8)\n+            }\n+            .frame(minHeight: 100)\n+            .background(Color(nsColor: .controlBackgroundColor))\n+            .cornerRadius(6)\n+            \n+            // Action buttons\n+            HStack(spacing: 8) {\n+                Button(action: copyTranscript) {\n+                    Label(\"Copy\", systemImage: \"doc.on.doc\")\n+                        .font(.system(size: 11, weight: .medium))\n+                }\n+                .disabled(recordingManager.transcript.isEmpty)\n+                \n+                Button(action: exportTranscript) {\n+                    Label(\"Export\", systemImage: \"arrow.up.doc\")\n+                        .font(.system(size: 11, weight: .medium))\n+                }\n+                .disabled(recordingManager.transcript.isEmpty)\n+                \n+                Spacer()\n+                \n+                if case .failed(let error) = recordingManager.status {\n+                    Text(\"Error: \\(error.localizedDescription)\")\n+                        .font(.system(size: 10))\n+                        .foregroundStyle(.red)\n+                }\n+            }\n+        }\n+        .padding(12)\n+        .background(Color(nsColor: .controlColor))\n+        .cornerRadius(8)\n+    }\n+    \n+    @ViewBuilder\n+    private var statusIndicator: some View {\n+        switch recordingManager.status {\n+        case .idle:\n+            Label(\"Ready\", systemImage: \"checkmark.circle.fill\")\n+                .font(.system(size: 12))\n+                .foregroundStyle(.gray)\n+        case .capturing:\n+            HStack(spacing: 4) {\n+                ProgressView()\n+                    .controlSize(.small)\n+                Text(\"Recording...\")\n+                    .font(.system(size: 12))\n+            }\n+            .foregroundStyle(.blue)\n+        case .transcribing:\n+            HStack(spacing: 4) {\n+                ProgressView()\n+                    .controlSize(.small)\n+                Text(\"Transcribing...\")\n+                    .font(.system(size: 12))\n+            }\n+            .foregroundStyle(.orange)\n+        case .completed:\n+            Label(\"Done\", systemImage: \"checkmark.circle.fill\")\n+                .font(.system(size: 12))\n+                .foregroundStyle(.green)\n+        case .failed:\n+            Label(\"Error\", systemImage: \"exclamationmark.circle.fill\")\n+                .font(.system(size: 12))\n+                .foregroundStyle(.red)\n+        }\n+    }\n+    \n+    private func copyTranscript() {\n+        NSPasteboard.general.clearContents()\n+        NSPasteboard.general.setString(recordingManager.transcript, forType: .string)\n+    }\n+    \n+    private func exportTranscript() {\n+        let savePanel = NSSavePanel()\n+        savePanel.allowedContentTypes = [.plainText]\n+        let formatter = ISO8601DateFormatter()\n+        let dateString = formatter.string(from: Date())\n+        savePanel.nameFieldStringValue = \"transcript-\\(dateString).txt\"\n+        \n+        savePanel.begin { response in\n+            guard response == .OK, let url = savePanel.url else { return }\n+            do {\n+                try recordingManager.transcript.write(to: url, atomically: true, encoding: String.Encoding.utf8)\n+            } catch {\n+                print(\"Failed to export transcript: \\(error)\")","path":"OverhearApp/Sources/Features/Transcription/TranscriptionView.swift","commit_id":"9006bce58dddd7437a6c30b7bf87a64837fa3767","original_commit_id":"6afc2bea98f4aa3826c93b529bbc3d89ecfe6500","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"[nitpick] The error is printed to console but not shown to the user. Consider displaying an alert or error message in the UI when export fails so users know why their action didn't succeed.","created_at":"2025-11-27T01:55:54Z","updated_at":"2025-11-27T01:55:57Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2566943657","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943657"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2566943657"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2566943657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":111,"side":"RIGHT","author_association":"NONE","original_position":111,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554657","pull_request_review_id":3516417009,"id":2569554657,"node_id":"PRRC_kwDOQdvB5c6ZKErh","diff_hunk":"@@ -24,6 +191,61 @@ enum MeetingPlatform: String, Codable, CaseIterable {\n         }\n         return .unknown\n     }\n+\n+    func openURL(_ url: URL, openBehavior: OpenBehavior) -> Bool {\n+        let urlToOpen: URL\n+        switch self {\n+        case .zoom:\n+            switch openBehavior {\n+            case .zoommtg, .app:\n+                urlToOpen = convertToZoomMTG(url) ?? url\n+            case .browser:\n+                urlToOpen = url\n+            }\n+        case .meet, .teams, .webex, .unknown:\n+            urlToOpen = url\n+        }\n+\n+        return NSWorkspace.shared.open(urlToOpen)\n+    }\n+\n+    private func convertToZoomMTG(_ url: URL) -> URL? {\n+        // Basic conversion: if it's a zoom.us link, try to extract meeting ID and create zoommtg://\n+        guard let host = url.host?.lowercased(), host.contains(\"zoom.us\") || host.contains(\"zoom.com\") else {\n+            return nil\n+        }\n+        let path = url.path\n+        // Zoom URLs like https://zoom.us/j/123456789 or https://zoom.us/meeting/123456789\n+        if path.hasPrefix(\"/j/\") || path.hasPrefix(\"/meeting/\") {\n+            let components = path.split(separator: \"/\")\n+            if components.count >= 3, let meetingID = components.last {\n+                return URL(string: \"zoommtg://zoom.us/join?confno=\\(meetingID)\")\n+            }","path":"OverhearApp/Sources/Features/Meetings/Meeting.swift","commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","original_commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","user":{"login":"chatgpt-codex-connector[bot]","id":199175422,"node_id":"BOT_kgDOC98s_g","avatar_url":"https://avatars.githubusercontent.com/in/1144995?v=4","gravatar_id":"","url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D","html_url":"https://github.com/apps/chatgpt-codex-connector","followers_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/followers","following_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/repos","events_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**<sub><sub>![P1 Badge](https://img.shields.io/badge/P1-orange?style=flat)</sub></sub>  Convert Zoom links fails for standard /j/ URLs**\n\nThe new `MeetingPlatform.convertToZoomMTG` only builds a `zoommtg://` URL when the path has at least three components, but common Zoom links look like `https://zoom.us/j/<meetingId>` where `path.split(separator: \"/\")` returns two components. In that normal case the guard short‑circuits and returns `nil`, so selecting the Zoom‑app behavior silently falls back to opening the browser link instead of the Zoom client. Please relax the component count so `/j/<id>` links convert correctly.\n\nUseful? React with 👍 / 👎.","created_at":"2025-11-27T17:03:02Z","updated_at":"2025-11-27T17:03:02Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2569554657","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554657"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2569554657"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":100,"original_start_line":212,"start_side":"RIGHT","line":129,"original_line":223,"side":"RIGHT","author_association":"NONE","original_position":206,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554664","pull_request_review_id":3516417009,"id":2569554664,"node_id":"PRRC_kwDOQdvB5c6ZKEro","diff_hunk":"@@ -55,7 +56,49 @@ final class MeetingListViewModel: ObservableObject {\n \n     func join(meeting: Meeting) {\n         guard let url = meeting.url else { return }\n-        NSWorkspace.shared.open(url)\n+        var urlToOpen = url\n+        if meeting.platform == .zoom, let zoommtgURL = convertToZoomMTG(url) {\n+            urlToOpen = zoommtgURL\n+        }\n+        let success = NSWorkspace.shared.open(urlToOpen)\n+        if !success {","path":"OverhearApp/Sources/Features/Meetings/MeetingListViewModel.swift","commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","original_commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","user":{"login":"chatgpt-codex-connector[bot]","id":199175422,"node_id":"BOT_kgDOC98s_g","avatar_url":"https://avatars.githubusercontent.com/in/1144995?v=4","gravatar_id":"","url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D","html_url":"https://github.com/apps/chatgpt-codex-connector","followers_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/followers","following_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/repos","events_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**<sub><sub>![P2 Badge](https://img.shields.io/badge/P2-yellow?style=flat)</sub></sub>  Honor per-platform open behavior when joining meetings**\n\nThe join flow still hardcodes its own Zoom conversion and then opens the URL directly via `NSWorkspace`, ignoring the new per-platform open-behavior settings exposed by `PreferencesService` (zoom/meet/teams/webex). As a result, changing those preferences has no effect—e.g., choosing to always open Zoom links in the browser still runs through the zoommtg conversion. This makes the newly added preference UI inert.\n\nUseful? React with 👍 / 👎.","created_at":"2025-11-27T17:03:02Z","updated_at":"2025-11-27T17:03:02Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2569554664","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554664"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2569554664"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":56,"original_start_line":56,"start_side":"LEFT","line":60,"original_line":64,"side":"RIGHT","author_association":"NONE","original_position":18,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554776","pull_request_review_id":3516417128,"id":2569554776,"node_id":"PRRC_kwDOQdvB5c6ZKEtY","diff_hunk":"@@ -0,0 +1,282 @@\n+import SwiftUI\n+import Combine\n+import AppKit\n+import Foundation\n+\n+/// View for searching and browsing stored transcripts\n+struct TranscriptSearchView: View {\n+    @StateObject private var viewModel = TranscriptSearchViewModel()\n+    @State private var selectedTranscript: StoredTranscript?\n+    @State private var showingDetailView = false\n+    \n+    var body: some View {\n+        NavigationView {\n+            VStack(spacing: 0) {\n+                // Search bar\n+                HStack(spacing: 8) {\n+                    Image(systemName: \"magnifyingglass\")\n+                        .foregroundStyle(.gray)\n+                    TextField(\"Search transcripts...\", text: $viewModel.searchQuery)\n+                        .textFieldStyle(.roundedBorder)\n+                    if !viewModel.searchQuery.isEmpty {\n+                        Button(action: { viewModel.searchQuery = \"\" }) {\n+                            Image(systemName: \"xmark.circle.fill\")\n+                                .foregroundStyle(.gray)\n+                        }\n+                        .buttonStyle(.plain)\n+                    }\n+                }\n+                .padding(12)\n+                .background(Color(nsColor: .controlBackgroundColor))\n+                .border(Color(nsColor: .separatorColor), width: 1)\n+                \n+                if viewModel.isLoading {\n+                    VStack {\n+                        Spacer()\n+                        ProgressView()\n+                        Spacer()\n+                    }\n+                } else if let errorMessage = viewModel.errorMessage {\n+                    VStack(spacing: 12) {\n+                        Spacer()\n+                        Image(systemName: \"exclamationmark.triangle\")\n+                            .font(.system(size: 48))\n+                            .foregroundStyle(.orange)\n+                        Text(\"Error\")\n+                            .font(.system(size: 14, weight: .semibold))\n+                        Text(errorMessage)\n+                            .font(.system(size: 12))\n+                            .foregroundStyle(.gray)\n+                            .multilineTextAlignment(.center)\n+                            .padding(.horizontal, 20)\n+                        Button(\"Retry\") {\n+                            Task { await viewModel.loadTranscripts() }\n+                        }\n+                        .buttonStyle(.bordered)\n+                        Spacer()\n+                    }\n+                    .frame(maxWidth: .infinity, maxHeight: .infinity)\n+                } else if viewModel.transcripts.isEmpty {\n+                    VStack(spacing: 12) {\n+                        Spacer()\n+                        Image(systemName: \"doc.text.image\")\n+                            .font(.system(size: 48))\n+                            .foregroundStyle(.gray)\n+                        Text(viewModel.searchQuery.isEmpty ? \"No transcripts yet\" : \"No results found\")\n+                            .font(.system(size: 14, weight: .semibold))\n+                        Text(viewModel.searchQuery.isEmpty ? \"Transcripts from meetings will appear here\" : \"Try different search terms\")\n+                            .font(.system(size: 12))\n+                            .foregroundStyle(.gray)\n+                        Spacer()\n+                    }\n+                    .frame(maxWidth: .infinity, maxHeight: .infinity)\n+                } else {\n+                    List(viewModel.transcripts) { transcript in\n+                        TranscriptRow(transcript: transcript)\n+                            .onTapGesture {\n+                                selectedTranscript = transcript\n+                                showingDetailView = true\n+                            }\n+                    }\n+                    .listStyle(.plain)\n+                }\n+            }\n+            .navigationTitle(\"Transcripts\")\n+            .toolbar {\n+                ToolbarItem(placement: .primaryAction) {\n+                    Button(action: { Task { await viewModel.refresh() } }) {\n+                        Image(systemName: \"arrow.clockwise\")\n+                    }\n+                }\n+            }\n+        }\n+        .navigationViewStyle(.automatic)\n+        .sheet(isPresented: $showingDetailView) {\n+            if let transcript = selectedTranscript {\n+                TranscriptDetailView(transcript: transcript)\n+            }\n+        }\n+        .onAppear {\n+            Task { await viewModel.loadTranscripts() }\n+        }\n+    }\n+}\n+\n+/// Row view for a single transcript\n+struct TranscriptRow: View {\n+    let transcript: StoredTranscript\n+    \n+    var body: some View {\n+        VStack(alignment: .leading, spacing: 4) {\n+            HStack {\n+                Text(transcript.title)\n+                    .font(.system(size: 13, weight: .semibold))\n+                    .lineLimit(1)\n+                Spacer()\n+                Text(transcript.formattedDate)\n+                    .font(.system(size: 11))\n+                    .foregroundStyle(.gray)\n+            }\n+            Text(transcript.transcript.prefix(100) + \"...\")","path":"OverhearApp/Sources/Features/Transcription/TranscriptSearchView.swift","commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","original_commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"String concatenation with prefix(100) can crash if the transcript is shorter than 100 characters. The Substring from prefix() cannot be directly concatenated with a String literal. Use `String(transcript.transcript.prefix(100)) + \\\"...\\\"` or check the length first.\n```suggestion\n            Text(\n                transcript.transcript.count > 100\n                ? String(transcript.transcript.prefix(100)) + \"...\"\n                : transcript.transcript\n            )\n```","created_at":"2025-11-27T17:03:05Z","updated_at":"2025-11-27T17:03:07Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2569554776","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554776"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2569554776"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":120,"side":"RIGHT","author_association":"NONE","original_position":120,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554792","pull_request_review_id":3516417128,"id":2569554792,"node_id":"PRRC_kwDOQdvB5c6ZKEto","diff_hunk":"@@ -0,0 +1,282 @@\n+import SwiftUI\n+import Combine\n+import AppKit\n+import Foundation\n+\n+/// View for searching and browsing stored transcripts\n+struct TranscriptSearchView: View {\n+    @StateObject private var viewModel = TranscriptSearchViewModel()\n+    @State private var selectedTranscript: StoredTranscript?\n+    @State private var showingDetailView = false\n+    \n+    var body: some View {\n+        NavigationView {\n+            VStack(spacing: 0) {\n+                // Search bar\n+                HStack(spacing: 8) {\n+                    Image(systemName: \"magnifyingglass\")\n+                        .foregroundStyle(.gray)\n+                    TextField(\"Search transcripts...\", text: $viewModel.searchQuery)\n+                        .textFieldStyle(.roundedBorder)\n+                    if !viewModel.searchQuery.isEmpty {\n+                        Button(action: { viewModel.searchQuery = \"\" }) {\n+                            Image(systemName: \"xmark.circle.fill\")\n+                                .foregroundStyle(.gray)\n+                        }\n+                        .buttonStyle(.plain)\n+                    }\n+                }\n+                .padding(12)\n+                .background(Color(nsColor: .controlBackgroundColor))\n+                .border(Color(nsColor: .separatorColor), width: 1)\n+                \n+                if viewModel.isLoading {\n+                    VStack {\n+                        Spacer()\n+                        ProgressView()\n+                        Spacer()\n+                    }\n+                } else if let errorMessage = viewModel.errorMessage {\n+                    VStack(spacing: 12) {\n+                        Spacer()\n+                        Image(systemName: \"exclamationmark.triangle\")\n+                            .font(.system(size: 48))\n+                            .foregroundStyle(.orange)\n+                        Text(\"Error\")\n+                            .font(.system(size: 14, weight: .semibold))\n+                        Text(errorMessage)\n+                            .font(.system(size: 12))\n+                            .foregroundStyle(.gray)\n+                            .multilineTextAlignment(.center)\n+                            .padding(.horizontal, 20)\n+                        Button(\"Retry\") {\n+                            Task { await viewModel.loadTranscripts() }\n+                        }\n+                        .buttonStyle(.bordered)\n+                        Spacer()\n+                    }\n+                    .frame(maxWidth: .infinity, maxHeight: .infinity)\n+                } else if viewModel.transcripts.isEmpty {\n+                    VStack(spacing: 12) {\n+                        Spacer()\n+                        Image(systemName: \"doc.text.image\")\n+                            .font(.system(size: 48))\n+                            .foregroundStyle(.gray)\n+                        Text(viewModel.searchQuery.isEmpty ? \"No transcripts yet\" : \"No results found\")\n+                            .font(.system(size: 14, weight: .semibold))\n+                        Text(viewModel.searchQuery.isEmpty ? \"Transcripts from meetings will appear here\" : \"Try different search terms\")\n+                            .font(.system(size: 12))\n+                            .foregroundStyle(.gray)\n+                        Spacer()\n+                    }\n+                    .frame(maxWidth: .infinity, maxHeight: .infinity)\n+                } else {\n+                    List(viewModel.transcripts) { transcript in\n+                        TranscriptRow(transcript: transcript)\n+                            .onTapGesture {\n+                                selectedTranscript = transcript\n+                                showingDetailView = true\n+                            }\n+                    }\n+                    .listStyle(.plain)\n+                }\n+            }\n+            .navigationTitle(\"Transcripts\")\n+            .toolbar {\n+                ToolbarItem(placement: .primaryAction) {\n+                    Button(action: { Task { await viewModel.refresh() } }) {\n+                        Image(systemName: \"arrow.clockwise\")\n+                    }\n+                }\n+            }\n+        }\n+        .navigationViewStyle(.automatic)\n+        .sheet(isPresented: $showingDetailView) {\n+            if let transcript = selectedTranscript {\n+                TranscriptDetailView(transcript: transcript)\n+            }\n+        }\n+        .onAppear {\n+            Task { await viewModel.loadTranscripts() }\n+        }\n+    }\n+}\n+\n+/// Row view for a single transcript\n+struct TranscriptRow: View {\n+    let transcript: StoredTranscript\n+    \n+    var body: some View {\n+        VStack(alignment: .leading, spacing: 4) {\n+            HStack {\n+                Text(transcript.title)\n+                    .font(.system(size: 13, weight: .semibold))\n+                    .lineLimit(1)\n+                Spacer()\n+                Text(transcript.formattedDate)\n+                    .font(.system(size: 11))\n+                    .foregroundStyle(.gray)\n+            }\n+            Text(transcript.transcript.prefix(100) + \"...\")\n+                .font(.system(size: 11))\n+                .lineLimit(2)\n+                .foregroundStyle(.gray)\n+        }\n+        .padding(.vertical, 8)\n+    }\n+}\n+\n+/// Detail view for a single transcript\n+struct TranscriptDetailView: View {\n+    let transcript: StoredTranscript\n+    @Environment(\\.dismiss) var dismiss\n+    \n+    var body: some View {\n+        VStack(spacing: 0) {\n+            // Header\n+            HStack {\n+                VStack(alignment: .leading, spacing: 4) {\n+                    Text(transcript.title)\n+                        .font(.system(size: 16, weight: .bold))\n+                    Text(transcript.formattedDate)\n+                        .font(.system(size: 12))\n+                        .foregroundStyle(.gray)\n+                }\n+                Spacer()\n+                Button(action: { dismiss() }) {\n+                    Image(systemName: \"xmark\")\n+                        .font(.system(size: 14, weight: .semibold))\n+                        .foregroundStyle(.gray)\n+                }\n+            }\n+            .padding(16)\n+            .background(Color(nsColor: .controlColor))\n+            .border(Color(nsColor: .separatorColor), width: 1)\n+            \n+            // Transcript content\n+            ScrollView {\n+                VStack(alignment: .leading, spacing: 12) {\n+                    Text(transcript.transcript)\n+                        .font(.system(size: 12, design: .monospaced))\n+                        .lineLimit(nil)\n+                        .frame(maxWidth: .infinity, alignment: .leading)\n+                }\n+                .padding(16)\n+            }\n+            \n+            // Footer with actions\n+            HStack(spacing: 12) {\n+                Button(action: copyTranscript) {\n+                    Label(\"Copy\", systemImage: \"doc.on.doc\")\n+                        .font(.system(size: 11, weight: .medium))\n+                }\n+                \n+                Button(action: exportTranscript) {\n+                    Label(\"Export\", systemImage: \"arrow.up.doc\")\n+                        .font(.system(size: 11, weight: .medium))\n+                }\n+                \n+                Spacer()\n+                \n+                Button(action: { dismiss() }) {\n+                    Text(\"Done\")\n+                        .font(.system(size: 11, weight: .medium))\n+                }\n+            }\n+            .padding(12)\n+            .background(Color(nsColor: .controlBackgroundColor))\n+            .border(Color(nsColor: .separatorColor), width: 1)\n+        }\n+    }\n+    \n+    private func copyTranscript() {\n+        NSPasteboard.general.clearContents()\n+        NSPasteboard.general.setString(transcript.transcript, forType: .string)\n+    }\n+    \n+    private func exportTranscript() {\n+        let savePanel = NSSavePanel()\n+        savePanel.allowedContentTypes = [.plainText]\n+        let fileName = transcript.title\n+            .replacingOccurrences(of: \"/\", with: \"-\")\n+            .replacingOccurrences(of: \":\", with: \"-\")\n+        savePanel.nameFieldStringValue = \"\\(fileName)-\\(Int(transcript.date.timeIntervalSince1970)).txt\"\n+        \n+        savePanel.begin { response in\n+            guard response == .OK, let url = savePanel.url else { return }\n+            do {\n+                try transcript.transcript.write(to: url, atomically: true, encoding: String.Encoding.utf8)\n+            } catch {\n+                print(\"Failed to export transcript: \\(error)\")\n+            }\n+        }\n+    }\n+}\n+\n+/// ViewModel for transcript search\n+@MainActor\n+final class TranscriptSearchViewModel: ObservableObject {\n+    @Published var searchQuery = \"\"\n+    @Published var transcripts: [StoredTranscript] = []\n+    @Published var isLoading = false\n+    @Published var errorMessage: String?\n+    \n+    private let store = TranscriptStore()","path":"OverhearApp/Sources/Features/Transcription/TranscriptSearchView.swift","commit_id":"1cf137d8bc9e4656a2be455f04962a52cdcd32ca","original_commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"[nitpick] TranscriptStore is an actor but is being initialized synchronously on the MainActor. While this works, accessing actor methods from @MainActor context will require await at call sites. Consider documenting this pattern or making store initialization explicit with await if needed.","created_at":"2025-11-27T17:03:06Z","updated_at":"2025-11-27T17:03:07Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2569554792","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554792"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2569554792"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":233,"original_line":224,"side":"RIGHT","author_association":"NONE","original_position":224,"position":233,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554801","pull_request_review_id":3516417128,"id":2569554801,"node_id":"PRRC_kwDOQdvB5c6ZKEtx","diff_hunk":"@@ -1,5 +1,172 @@\n import Foundation\n import EventKit\n+import AppKit\n+import SwiftUI\n+\n+// MARK: - Supporting Types\n+\n+struct HolidayInfo {\n+    let emoji: String\n+    let isHoliday: Bool\n+}\n+\n+struct PlatformIconInfo {\n+    let iconName: String\n+    let color: NSColor\n+    let isSystemIcon: Bool\n+}\n+\n+enum GenericMeetingType {\n+    case allDay\n+    case phone\n+    case generic\n+}\n+","path":"OverhearApp/Sources/Features/Meetings/Meeting.swift","commit_id":"1cf137d8bc9e4656a2be455f04962a52cdcd32ca","original_commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"HolidayInfo, PlatformIconInfo, and GenericMeetingType are duplicated across Meeting.swift, HolidayDetector.swift, and PlatformIconProvider.swift. This creates maintenance issues and potential inconsistencies. These types should be defined once in a shared location.\n```suggestion\nimport SharedTypes\n```","created_at":"2025-11-27T17:03:06Z","updated_at":"2025-11-27T17:03:07Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2569554801","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554801"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2569554801"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":5,"original_start_line":5,"start_side":"RIGHT","line":24,"original_line":24,"side":"RIGHT","author_association":"NONE","original_position":24,"position":24,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554814","pull_request_review_id":3516417128,"id":2569554814,"node_id":"PRRC_kwDOQdvB5c6ZKEt-","diff_hunk":"@@ -1,5 +1,172 @@\n import Foundation\n import EventKit\n+import AppKit\n+import SwiftUI\n+\n+// MARK: - Supporting Types\n+\n+struct HolidayInfo {\n+    let emoji: String\n+    let isHoliday: Bool\n+}\n+\n+struct PlatformIconInfo {\n+    let iconName: String\n+    let color: NSColor\n+    let isSystemIcon: Bool\n+}\n+\n+enum GenericMeetingType {\n+    case allDay\n+    case phone\n+    case generic\n+}\n+\n+// MARK: - Holiday Detection\n+\n+final class HolidayDetector {\n+    static func detectHoliday(title: String, calendarName: String?, date: Date) -> HolidayInfo {","path":"OverhearApp/Sources/Features/Meetings/Meeting.swift","commit_id":"499ffe45117158fd241f4d13be78e9110d071d81","original_commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"HolidayDetector class is duplicated in both Meeting.swift and HolidayDetector.swift with different implementations. The Meeting.swift version (lines 27-99) has more complex logic checking for generic titles before applying date-based detection, while HolidayDetector.swift (lines 8-81) includes additional holidays like birthday and anniversary. This duplication will cause maintenance issues.","created_at":"2025-11-27T17:03:06Z","updated_at":"2025-11-27T17:03:07Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2569554814","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554814"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2569554814"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":27,"start_side":"RIGHT","line":null,"original_line":28,"side":"RIGHT","author_association":"NONE","original_position":28,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554828","pull_request_review_id":3516417128,"id":2569554828,"node_id":"PRRC_kwDOQdvB5c6ZKEuM","diff_hunk":"@@ -1,5 +1,172 @@\n import Foundation\n import EventKit\n+import AppKit\n+import SwiftUI\n+\n+// MARK: - Supporting Types\n+\n+struct HolidayInfo {\n+    let emoji: String\n+    let isHoliday: Bool\n+}\n+\n+struct PlatformIconInfo {\n+    let iconName: String\n+    let color: NSColor\n+    let isSystemIcon: Bool\n+}\n+\n+enum GenericMeetingType {\n+    case allDay\n+    case phone\n+    case generic\n+}\n+\n+// MARK: - Holiday Detection\n+\n+final class HolidayDetector {\n+    static func detectHoliday(title: String, calendarName: String?, date: Date) -> HolidayInfo {\n+         let combinedText = (title + \" \" + (calendarName ?? \"\")).lowercased()\n+         \n+         // First check title/calendar name for explicit holiday mentions\n+         if combinedText.contains(\"thanksgiving\") {\n+             return HolidayInfo(emoji: \"🦃\", isHoliday: true)\n+         }\n+         \n+         if combinedText.contains(\"christmas\") || combinedText.contains(\"xmas\") || combinedText.contains(\"noel\") {\n+             return HolidayInfo(emoji: \"🎄\", isHoliday: true)\n+         }\n+         \n+         if combinedText.contains(\"black friday\") {\n+             return HolidayInfo(emoji: \"🛍️\", isHoliday: true)\n+         }\n+         \n+         if combinedText.contains(\"cyber monday\") {\n+             return HolidayInfo(emoji: \"💻\", isHoliday: true)\n+         }\n+         \n+         if combinedText.contains(\"easter\") {\n+             return HolidayInfo(emoji: \"🥚\", isHoliday: true)\n+         }\n+         \n+         if combinedText.contains(\"holiday\") {\n+             return HolidayInfo(emoji: \"🎉\", isHoliday: true)\n+         }\n+         \n+         // Only check fixed dates if the event title suggests it's actually a holiday\n+         let calendar = Calendar.current\n+         let month = calendar.component(.month, from: date)\n+         let day = calendar.component(.day, from: date)\n+         let monthDay = month * 100 + day\n+         \n+         // Only apply date-based holidays for events with generic/holiday-like titles\n+         // Avoid marking random events on holiday dates with holiday emojis\n+         let hasGenericTitle = combinedText.contains(\"day off\") || \n+                               combinedText.contains(\"time off\") ||\n+                               combinedText.contains(\"vacation\") ||\n+                               combinedText.contains(\"holiday\") ||\n+                               combinedText.isEmpty\n+         \n+         if !hasGenericTitle {\n+             // Only apply fixed dates if title is generic/empty or explicitly mentions time off\n+             return HolidayInfo(emoji: \"\", isHoliday: false)\n+         }\n+         \n+         // Now check specific dates for fixed holidays (only for generic events)\n+         switch monthDay {\n+         case 101:   // January 1 - New Year's Day\n+             return HolidayInfo(emoji: \"⭐\", isHoliday: true)\n+         case 214:   // February 14 - Valentine's Day\n+             return HolidayInfo(emoji: \"❤️\", isHoliday: true)\n+         case 317:   // March 17 - St. Patrick's Day\n+             return HolidayInfo(emoji: \"🍀\", isHoliday: true)\n+         case 704:   // July 4 - Independence Day\n+             return HolidayInfo(emoji: \"🇺🇸\", isHoliday: true)\n+         case 1031:  // October 31 - Halloween\n+             return HolidayInfo(emoji: \"🎃\", isHoliday: true)\n+         case 1101:  // November 1 - Day of the Dead\n+             return HolidayInfo(emoji: \"💀\", isHoliday: true)\n+         case 1225:  // December 25 - Christmas\n+             return HolidayInfo(emoji: \"🎄\", isHoliday: true)\n+         case 1231:  // December 31 - New Year's Eve\n+             return HolidayInfo(emoji: \"⭐\", isHoliday: true)\n+         default:\n+             break\n+         }\n+         \n+         return HolidayInfo(emoji: \"\", isHoliday: false)\n+     }\n+}\n+\n+// MARK: - Platform Icon Provider\n+\n+final class PlatformIconProvider {\n+    static func iconInfo(for platform: MeetingPlatform) -> PlatformIconInfo {\n+        switch platform {\n+        case .zoom:\n+            return PlatformIconInfo(\n+                iconName: \"video.circle.fill\",  // Zoom - video icon in circle\n+                color: NSColor(calibratedRed: 0.04, green: 0.36, blue: 1.0, alpha: 1.0),  // #0B5CFF Zoom Blue\n+                isSystemIcon: true\n+            )\n+        \n+        case .meet:\n+            return PlatformIconInfo(\n+                iconName: \"person.2.fill\",  // Google Meet - two people\n+                color: NSColor(calibratedRed: 0.0, green: 0.53, blue: 0.48, alpha: 1.0),  // #00897B Meet Green\n+                isSystemIcon: true\n+            )\n+        \n+        case .teams:\n+            return PlatformIconInfo(\n+                iconName: \"person.3.fill\",  // Teams - three people\n+                color: NSColor(calibratedRed: 0.48, green: 0.41, blue: 0.93, alpha: 1.0),  // #7B68EE Teams Purple\n+                isSystemIcon: true\n+            )\n+        \n+        case .webex:\n+            return PlatformIconInfo(\n+                iconName: \"person.2.circle.fill\",  // Webex - two people in circle\n+                color: NSColor(calibratedRed: 0.0, green: 0.35, blue: 0.61, alpha: 1.0),  // #005A9C Webex Blue\n+                isSystemIcon: true\n+            )\n+        \n+        case .unknown:\n+            return PlatformIconInfo(\n+                iconName: \"calendar.badge.clock\",\n+                color: NSColor(calibratedRed: 0.66, green: 0.66, blue: 0.66, alpha: 1.0),  // Grey\n+                isSystemIcon: true\n+            )\n+        }\n+    }\n+    \n+    static func genericIconInfo(for meetingType: GenericMeetingType) -> PlatformIconInfo {\n+        switch meetingType {\n+        case .allDay:\n+            return PlatformIconInfo(\n+                iconName: \"calendar\",\n+                color: NSColor(calibratedRed: 0.66, green: 0.66, blue: 0.66, alpha: 1.0),\n+                isSystemIcon: true\n+            )\n+        \n+        case .phone:\n+            return PlatformIconInfo(\n+                iconName: \"phone.fill\",\n+                color: NSColor(calibratedRed: 0.0, green: 0.48, blue: 1.0, alpha: 1.0),  // #007AFF Phone Blue\n+                isSystemIcon: true\n+            )\n+        \n+        case .generic:\n+            return PlatformIconInfo(\n+                iconName: \"calendar.badge.clock\",\n+                color: NSColor(calibratedRed: 0.66, green: 0.66, blue: 0.66, alpha: 1.0),\n+                isSystemIcon: true\n+            )\n+        }\n+    }\n+}","path":"OverhearApp/Sources/Features/Meetings/Meeting.swift","commit_id":"499ffe45117158fd241f4d13be78e9110d071d81","original_commit_id":"8cb8b2662af1a24fa55b804237c27a1c2d25ce9c","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"PlatformIconProvider class is duplicated in both Meeting.swift and PlatformIconProvider.swift with different icon choices. For example, Zoom uses 'video.circle.fill' in Meeting.swift but 'video.fill' in PlatformIconProvider.swift. This duplication creates inconsistency and maintenance burden.\n```suggestion\n\n```","created_at":"2025-11-27T17:03:06Z","updated_at":"2025-11-27T17:03:07Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2569554828","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554828"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2569554828"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2569554828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":103,"start_side":"RIGHT","line":null,"original_line":167,"side":"RIGHT","author_association":"NONE","original_position":167,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2578976164","pull_request_review_id":3527357980,"id":2578976164,"node_id":"PRRC_kwDOQdvB5c6ZuA2k","diff_hunk":"@@ -92,6 +103,20 @@ final class MeetingListViewModel: ObservableObject {\n         return formatter.string(from: date)\n     }\n \n+    private func isPastDate(_ date: Date, events: [Meeting], now: Date, calendar: Calendar, fiveMinutesFromNow: Date) -> Bool {\n+        let today = calendar.startOfDay(for: now)\n+        \n+        if date < today {\n+            return true\n+        }\n+        \n+        if date == today {\n+            return events.allSatisfy { $0.endDate < fiveMinutesFromNow }","path":"OverhearApp/Sources/Features/Meetings/MeetingListViewModel.swift","commit_id":"e057dd7540d1103efb4a5b3ea6bd21080d35cd3a","original_commit_id":"e057dd7540d1103efb4a5b3ea6bd21080d35cd3a","user":{"login":"chatgpt-codex-connector[bot]","id":199175422,"node_id":"BOT_kgDOC98s_g","avatar_url":"https://avatars.githubusercontent.com/in/1144995?v=4","gravatar_id":"","url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D","html_url":"https://github.com/apps/chatgpt-codex-connector","followers_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/followers","following_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/repos","events_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/chatgpt-codex-connector%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**<sub><sub>![P2 Badge](https://img.shields.io/badge/P2-yellow?style=flat)</sub></sub>  Correct past/upcoming cutoff for meetings ending soon**\n\nThe new grace-period logic marks a whole day as past whenever all meetings end before `fiveMinutesFromNow` (current time plus five minutes), i.e., it flips to the past up to five minutes **before** an ongoing meeting ends. That contradicts the intent to keep meetings “upcoming until 5 minutes after their end time” and causes meetings in their final minutes to be treated as past/hidden from the upcoming list while they are still in progress. The comparison should be against a timestamp five minutes **ago**, not five minutes in the future.\n\nUseful? React with 👍 / 👎.","created_at":"2025-12-01T22:48:33Z","updated_at":"2025-12-01T22:48:33Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2578976164","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2578976164"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2578976164"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2578976164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":113,"start_side":"RIGHT","line":null,"original_line":114,"side":"RIGHT","author_association":"NONE","original_position":52,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2579005445","pull_request_review_id":3527409196,"id":2579005445,"node_id":"PRRC_kwDOQdvB5c6ZuIAF","diff_hunk":"@@ -95,13 +142,91 @@ struct PreferencesView: View {\n \n     private func loadCalendars() async {\n         isLoadingCalendars = true\n+\n+        // Request calendar access if needed\n         let accessGranted = await calendarService.requestAccessIfNeeded()\n+        \n         guard accessGranted else {\n             isLoadingCalendars = false\n-            calendars = []\n+            calendarsBySource = []\n             return\n         }\n-        calendars = calendarService.availableCalendars().sorted { $0.title < $1.title }\n+\n+        // Load calendars\n+        calendarsBySource = calendarService.calendarsBySource()\n+\n+        // Initialize with all calendars on first run\n+        let allCalendarIDs = calendarsBySource.flatMap { $0.calendars.map { $0.calendarIdentifier } }\n+        preferences.initializeWithAllCalendars(allCalendarIDs)\n+        \n         isLoadingCalendars = false\n     }\n }\n+\n+/// Toggle for an entire source\n+private struct SourceToggle: View {\n+    let source: EKSource\n+    let calendars: [EKCalendar]\n+    @ObservedObject var preferences: PreferencesService\n+    \n+    var body: some View {\n+        Toggle(isOn: Binding(\n+            get: {\n+                // All calendars in this source are selected\n+                calendars.allSatisfy { preferences.selectedCalendarIDs.contains($0.calendarIdentifier) }\n+            },\n+            set: { newValue in\n+                for calendar in calendars {\n+                    preferences.toggleCalendar(id: calendar.calendarIdentifier, enabled: newValue)\n+                }\n+            }\n+        )) {\n+            HStack(spacing: 4) {\n+                Text(source.title)\n+                    .font(.system(size: 13, weight: .semibold))\n+                \n+                // Show mixed state indicator\n+                if isMixedState {\n+                    Circle()\n+                        .fill(Color.orange)\n+                        .frame(width: 6, height: 6)\n+                        .overlay(\n+                            Text(\"!\")\n+                                .font(.system(size: 10, weight: .bold))\n+                                .foregroundColor(.white)\n+                        )","path":"OverhearApp/Sources/Features/Preferences/PreferencesView.swift","commit_id":"499ffe45117158fd241f4d13be78e9110d071d81","original_commit_id":"499ffe45117158fd241f4d13be78e9110d071d81","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"The mixed state indicator uses an orange circle with an exclamation mark, but this UI pattern is not intuitive. A dash/minus symbol or a checkbox with intermediate/mixed state styling would be clearer for indicating partial selection. The exclamation mark typically suggests a warning or error state, not a mixed selection state.\n```suggestion\n                    Rectangle()\n                        .fill(Color.gray)\n                        .frame(width: 10, height: 2)\n                        .cornerRadius(1)\n```","created_at":"2025-12-01T22:57:27Z","updated_at":"2025-12-01T22:57:34Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2579005445","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2579005445"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2579005445"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2579005445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":190,"start_side":"RIGHT","line":null,"original_line":197,"side":"RIGHT","author_association":"NONE","original_position":213,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2579005473","pull_request_review_id":3527409196,"id":2579005473,"node_id":"PRRC_kwDOQdvB5c6ZuIAh","diff_hunk":"@@ -55,19 +56,30 @@ final class MeetingListViewModel: ObservableObject {\n \n     func join(meeting: Meeting) {\n         guard let url = meeting.url else { return }\n-        NSWorkspace.shared.open(url)\n+        let success = meeting.platform.openURL(url, openBehavior: preferences.openBehavior(for: meeting.platform))\n+        if !success {\n+            // Copy to clipboard as fallback\n+            NSPasteboard.general.clearContents()\n+            NSPasteboard.general.setString(url.absoluteString, forType: .string)","path":"OverhearApp/Sources/Features/Meetings/MeetingListViewModel.swift","commit_id":"1cf137d8bc9e4656a2be455f04962a52cdcd32ca","original_commit_id":"499ffe45117158fd241f4d13be78e9110d071d81","user":{"login":"Copilot","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/Copilot","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/Copilot/followers","following_url":"https://api.github.com/users/Copilot/following{/other_user}","gists_url":"https://api.github.com/users/Copilot/gists{/gist_id}","starred_url":"https://api.github.com/users/Copilot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Copilot/subscriptions","organizations_url":"https://api.github.com/users/Copilot/orgs","repos_url":"https://api.github.com/users/Copilot/repos","events_url":"https://api.github.com/users/Copilot/events{/privacy}","received_events_url":"https://api.github.com/users/Copilot/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"When URL opening fails and the fallback clipboard copy is used, there's no user feedback. Users won't know that the link was copied to clipboard instead of being opened. Consider showing a notification or alert: \"Failed to open link. URL copied to clipboard.\"\n```suggestion\n            NSPasteboard.general.setString(url.absoluteString, forType: .string)\n            \n            // Show user feedback\n            let alert = NSAlert()\n            alert.messageText = \"Failed to open link. URL copied to clipboard.\"\n            alert.alertStyle = .informational\n            alert.runModal()\n```","created_at":"2025-12-01T22:57:28Z","updated_at":"2025-12-01T22:57:34Z","html_url":"https://github.com/keithah/overhear/pull/13#discussion_r2579005473","pull_request_url":"https://api.github.com/repos/keithah/overhear/pulls/13","_links":{"self":{"href":"https://api.github.com/repos/keithah/overhear/pulls/comments/2579005473"},"html":{"href":"https://github.com/keithah/overhear/pull/13#discussion_r2579005473"},"pull_request":{"href":"https://api.github.com/repos/keithah/overhear/pulls/13"}},"reactions":{"url":"https://api.github.com/repos/keithah/overhear/pulls/comments/2579005473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":63,"original_line":63,"side":"RIGHT","author_association":"NONE","original_position":17,"position":17,"subject_type":"line"}]